!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.application=e()}}(function(){return function e(t,o,n){function i(s,a){if(!o[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[s]={exports:{}};t[s][0].call(u.exports,function(e){var o=t[s][1][e];return i(o?o:e)},u,u.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,o){$(document).ready(function(){(new i).run()});var n,i=function(){function e(){var e=this;this.socketio=null,this.robotIpEntry=null,this.cameraButton=null,this.connectButton=null,this.cameraControlsButton=null,this.cameraControlsOff=null,this.cameraControlsJoystick=null,this.cameraControlsSteppedJoystick=null,this.robotControls=new g,this.cameraControls=new s,this.run=function(){e.robotControls.init(),e.cameraControls.init(),e.cameraButton=$("#cameraButton"),e.cameraButton.bootstrapToggle(),e.cameraButton.change(function(){e.processToggleCamera()}),e.connectButton=$("#connectButton"),e.connectButton.bootstrapToggle(),e.connectButton.change(function(){e.processRobotToggle()}),e.cameraControlsButton=$("#controlsButtonOptions"),e.cameraControlsJoystick=$("#controlsJoystick").click(function(){e.cameraControls.selectMode(n.FollowMeJoystick)}),e.cameraControlsSteppedJoystick=$("#controlsSteppedJoystick").click(function(){e.cameraControls.selectMode(n.SteppedJoystick)}),e.disableControlsButton();var t=$("#settingsButton");t.click(function(){f.Current.show()}),a.getInstance().show()},this.getToggleStatus=function(e){return null!=e&&e.prop("checked")},this.getIsConnected=function(){return e.getToggleStatus(e.connectButton)},this.getIsCameraActive=function(){return e.getToggleStatus(e.cameraButton)},this.getIsControlsActive=function(){return!0},this.disableControlsButton=function(){e.cameraControls.hide(),e.cameraControlsButton.prop("disabled",!0)},this.enableControlsButton=function(){e.cameraControlsButton.prop("disabled",!1),e.cameraControls.show()},this.connect=function(){e.socketio=io.connect(f.Current.getBaseServerUrl()+":80/",{forceNew:!0}),e.socketio.on("connected",function(t){$("#badge").text(t.title+" "+t.robotType),a.getInstance().hideIcon(r.Engine),e.robotControls.modifySpeed(0),t.hasOwnProperty("logoUrl")&&a.getInstance().setLogoUrl(t.logoUrl)}),e.socketio.on("disconnected",function(t){$("#badge").text("offline"),e.connectButton.bootstrapToggle("off"),e.cameraButton.bootstrapToggle("off")}),e.socketio.on("parking",function(e){a.getInstance().parkingControl.update(e)}),e.socketio.on("sysinfo",function(e){a.getInstance().update(e)}),e.socketio.on("error",function(e){a.getInstance().showIcon(r.Engine)}),e.socketio.on("reconnect_error",function(e){a.getInstance().showIcon(r.Engine)}),e.socketio.emit("connect")},this.disconnect=function(){null!==e.socketio&&e.socketio.disconnect()},this.processToggleControls=function(){!e.getIsCameraActive()},this.processToggleCamera=function(){e.getIsCameraActive()?(a.getInstance().startCamera(),e.enableControlsButton()):(a.getInstance().stopCamera(),e.getIsConnected()||(e.cameraControls.hide(),e.disableControlsButton()))},this.processRobotToggle=function(){e.getIsConnected()?a.getInstance().startEngine(function(){e.connect(),e.robotControls.show(),e.getIsCameraActive()||e.cameraButton.bootstrapToggle("toggle"),e.enableControlsButton()}):a.getInstance().stopEngine(function(){$("#badge").text("offline"),e.robotControls.hide(),e.disconnect(),e.getIsCameraActive()||(e.disableControlsButton(),e.cameraControls.hide())})}}return e}();!function(e){e[e.SteppedJoystick=0]="SteppedJoystick",e[e.FollowMeJoystick=1]="FollowMeJoystick"}(n||(n={}));var r,s=function(){function e(){var e=this;this.joystickRight=null,this.currentTilt=95,this.currentPan=90,this.step=10,this.isBusy=!1,this.currentCameraControls=n.SteppedJoystick,this.sendCameraCommand=function(t){return e.isBusy&&"center"!==t?void console.log("Skipped request..."):(e.isBusy=!0,void h.Current.put("servos/"+t,e.processResult,function(){return e.isBusy=!1}))},this.processResult=function(t){var o=t.pan,n=t.tilt;null!=o&&-1!==o&&(e.currentPan=o),null!=n&&-1!==n&&(e.currentTilt=t.tilt),e.isBusy=!1},this.adjustTilt=function(t){return e.currentTilt+t},this.adjustPan=function(t){return e.currentPan+t}}return e.prototype.init=function(){},e.prototype.selectMode=function(e){this.currentCameraControls=e},e.prototype.show=function(){var e,t,o=this,i=null,r=0,s=0,a=120,l=Math.floor(a/2),c=0,u=0,h=!1;this.hide(),this.currentCameraControls=n.SteppedJoystick,null==this.joystickRight&&(this.joystickRight=nipplejs.create({maxNumberOfNipples:1,zone:document.getElementById("jRight"),size:a,mode:"dynamic",position:{left:"50%",top:"50%"},color:"blue"}).on("start end",function(r,s){o.currentCameraControls===n.FollowMeJoystick?("start"===r.type?(c=s.position.x,u=s.position.y,console.log("centerX:"+c+"  centerY:"+u)):(c=0,u=0,o.sendCameraCommand("center")),i=null,e=0):o.currentCameraControls===n.SteppedJoystick&&(clearInterval(t),"start"===r.type?h=!0:(o.sendCameraCommand("move/stop"),h&&(h=!1,o.sendCameraCommand("center"))))}).on("move",function(e,t){if(o.currentCameraControls===n.FollowMeJoystick){if(null==t||null===t.direction||null===t.position)return;var i=-Math.floor((t.position.x-c)/l*100),a=Math.floor((t.position.y-u)/l*100);if(i>100||-100>i||a>100||-100>a)return;i%2!==0&&a%2!==0||r===i&&s===a||(r=i,s=a,o.sendCameraCommand("percent/"+i+"/"+a))}}).on("dir",function(e,t){if(o.currentCameraControls===n.SteppedJoystick){h=!1;var r=t.direction.angle;if(console.log(r),i===r)return;i=r,o.sendCameraCommand("move/"+i)}}))},e.prototype.hide=function(){null!=this.joystickRight&&(this.joystickRight.destroy(),this.joystickRight=null),this.currentCameraControls=n.SteppedJoystick},e}(),a=function(){function e(){var t=this;if(this.parkingControl=new u,this.dummyVoltageValue="22.5 °C",this.tempWarningLimit=60,this.logoUrl=null,this.canvas=new fabric.StaticCanvas("dashboard"),this.zoomFactor=1,this.originalWidth=1408,this.originalHeight=513,this.isCameraVisible=!1,this.cruiseControlSpeed=0,this.isMoving=!1,this.show=function(){t.canvas.setBackgroundColor("black",function(){}),t.canvas.setHeight(t.originalHeight),t.canvas.setWidth(t.originalWidth),t.clockController=new l(t.canvas),t.iconsController=new c(t.canvas),t.parkingControl.iconsController=t.iconsController,t.drawMiddleDisplay(),t.drawCameraAndGauges(),setInterval(function(){t.clockController.isVisible()&&(t.clockController.updateTime(),null==t.cameraInterval&&t.canvas.renderAll())},1e3),window.onresize=t.resizeCanvas,t.tempInterval=setInterval(function(){clearInterval(t.tempInterval),t.resizeCanvas()},500)},this.startEngine=function(e){t.iconsController.showAllIcons(),t.leftGauge.setValue(100),t.rightGauge.setValue(90),t.miniGaugeLeft.setValue(100),t.miniGaugeRight.setValue(100),setTimeout(function(){t.iconsController.hideAllIcons(),t.leftGauge.setValue(0),t.rightGauge.setValue(0),t.miniGaugeLeft.setValue(0),t.miniGaugeRight.setValue(0),t.parkingControl.turnOn(),t.showIcon(r.ParkingSensors),t.showIcon(r.Headlights),t.showIcon(r.ParkingBrake),t.showIcon(r.SeatBelt),null!=e&&e()},1500)},this.stopEngine=function(e){t.parkingControl.turnOff(),t.miniGaugeLeft.setValue(0),t.miniGaugeRight.setValue(0),t.rightGauge.setValueAnimated(0),t.iconsController.hideAllIcons(),t.voltageText.setText(t.dummyVoltageValue),null!=e&&e()},this.setCruiseControlSpeed=function(e){if(null!=t.leftGauge){var o=!1;t.cruiseControlSpeed!==e&&t.isMoving&&(o=!0),t.cruiseControlSpeed=e,t.leftGauge.setThreshold(t.cruiseControlSpeed),o&&t.move()}0===t.cruiseControlSpeed?t.hideIcon(r.Tempomat):t.showIcon(r.Tempomat)},this.move=function(){null==t.leftGauge||null==t.cruiseControlSpeed||t.isMoving||(t.hideIcon(r.ParkingBrake),t.isMoving=!0,t.leftGauge.setValueAnimated(t.cruiseControlSpeed))},this.stop=function(){null!=t.leftGauge&&(t.isMoving=!1,t.leftGauge.setValueAnimated(0),t.showIcon(r.ParkingBrake),t.hideIcon(r.TurnSignals))},this.showIcon=function(e){t.iconsController.showIcon(e)},this.hideIcon=function(e){t.iconsController.hideIcon(e)},this.startCamera=function(){var e=document.getElementById("camera");e.onload=function(){t.hideClockOrLogo(),t.cameraImage.setElement(e),t.cameraImage.width=500,t.cameraImage.height=375},e.onerror=function(){t.showClockOrLogo()},e.src=f.Current.getCameraUrl(),t.cameraInterval=setInterval(function(){t.canvas.renderAll()},250)},this.stopCamera=function(){null!=t.cameraInterval&&(clearInterval(t.cameraInterval),t.cameraInterval=null);var e=document.getElementById("camera");e.onerror=function(){t.showClockOrLogo()},e.src="http://"},this.update=function(e){if(null!=t.canvas){var o=e.mp,n=e.cp,i=e.ct;t.rightGauge.setValueAnimated(i),t.miniGaugeLeft.setValue(n),t.miniGaugeRight.setValue(o),i>t.tempWarningLimit?t.iconsController.showIcon(r.WaterTemperature):t.iconsController.hideIcon(r.WaterTemperature),"0"!==e.v?t.voltageText.setText(e.v+" V"):t.voltageText.setText(t.dummyVoltageValue)}},this.setLogoUrl=function(e){t.logoUrl=e},this.hideClockOrLogo=function(){null!==t.logoUrl?t.canvas.remove(t.logoImage):t.clockController.hideClock()},this.showClockOrLogo=function(){null!==t.logoUrl?fabric.Image.fromURL(t.logoUrl,function(e){t.logoImage=e;var o=e.height/e.width;e.width=200*t.zoomFactor,e.left=705*t.zoomFactor-e.width/2,e.height=e.width*o,e.top=220*t.zoomFactor-e.height/2,t.canvas.add(e),t.canvas.renderAll()}):t.clockController.showClock()},this.drawCameraAndGauges=function(){fabric.Image.fromURL("http://",function(e){t.cameraImage=e;e.height/e.width;e.left=455,e.top=60,t.canvas.add(e),t.drawGauges()}),t.showClockOrLogo()},this.drawLeftGauge=function(){t.leftGauge=new steelseries.Radial("gLeft",{gaugeType:steelseries.GaugeType.TYPE3,minValue:0,maxValue:100,size:510,ledVisible:!1,foregroundType:steelseries.ForegroundType.TYPE3,frameDesign:steelseries.FrameDesign.TILTED_BLACK,knobStyle:steelseries.KnobStyle.SILVER,pointerType:steelseries.PointerType.TYPE9,lcdDecimals:0,threshold:0,tickLabelOrientation:steelseries.TickLabelOrientation.HORIZONTAL,section:null,area:null,titleString:"Speed",unitString:"%",lcdVisible:!0,useOdometer:!0,odometerParams:{digits:5},backgroundColor:steelseries.BackgroundColor.CARBON});var e=new fabric.Image(document.getElementById("gLeft"),{left:0,top:0,width:510,height:510});t.canvas.add(e),t.voltageText=new fabric.Text(t.dummyVoltageValue,{fontSize:28,textAlign:"center",left:890,top:25,fontFamily:"Arial",fill:"white"}),t.canvas.add(t.voltageText),t.miniGaugeLeft=new steelseries.Linear("gMiniLeft",{gaugeType:steelseries.GaugeType.TYPE1,backgroundVisible:!1,frameVisible:!1,minValue:0,maxValue:100,ledVisible:!1,thresholdVisible:!1,lcdVisible:!1,niceScale:!1,foregroundVisible:!1});var o=new fabric.Image(document.getElementById("gMiniLeft"),{left:405,top:400,width:340,height:80});t.canvas.add(o),t.miniGaugeRight=new steelseries.Linear("gMiniRight",{gaugeType:steelseries.GaugeType.TYPE1,backgroundVisible:!1,frameVisible:!1,minValue:0,maxValue:100,ledVisible:!1,lcdVisible:!1,niceScale:!0,thresholdVisible:!1,foregroundVisible:!1});var n=new fabric.Image(document.getElementById("gMiniRight"),{left:660,top:400,width:340,height:80});t.canvas.add(n)},this.drawRightGauge=function(){t.rightGauge=new steelseries.RadialBargraph("gRight",{gaugeType:steelseries.GaugeType.TYPE2,minValue:10,maxValue:90,size:510,tickLabelOrientation:steelseries.TickLabelOrientation.HORIZONTAL,foregroundType:steelseries.ForegroundType.TYPE3,frameDesign:steelseries.FrameDesign.TILTED_BLACK,ledVisible:!1,niceScale:!1,fractionalScaleDecimals:!1,useValueGradient:!0,section:null,area:null,lcdVisible:!1,backgroundColor:steelseries.BackgroundColor.CARBON});var e=new fabric.Image(document.getElementById("gRight"),{left:898,top:0,width:510,height:510});t.canvas.add(e);var o=new fabric.Text("°C",{fontSize:28,textAlign:"center",left:1317,top:270,fontFamily:"Arial",fill:"white"});t.canvas.add(o)},this.drawGauges=function(){t.drawLeftGauge(),t.drawRightGauge(),t.parkingControl.init(t.canvas)},this.drawMiddleDisplay=function(){t.canvas.add(new fabric.Line([400,59,1e3,59],{stroke:"gray",strokeWidth:2})),t.canvas.add(new fabric.Line([400,436,1e3,436],{stroke:"gray",strokeWidth:2}))},this.zoomIt=function(e){if(t.canvas.setHeight(t.canvas.getHeight()*e),t.canvas.setWidth(t.canvas.getWidth()*e),t.canvas.backgroundImage){var o=t.canvas.backgroundImage;o.width=o.width*e,o.height=o.height*e}var n=t.canvas.getObjects();for(var i in n){var r=n[i].scaleX,s=n[i].scaleY,a=n[i].left,l=n[i].top,c=r*e,u=s*e,h=a*e,g=l*e;n[i].scaleX=c,n[i].scaleY=u,n[i].left=h,n[i].top=g,n[i].setCoords()}t.canvas.renderAll(),t.canvas.calcOffset()},this.resizeCanvas=function(){var e=window.innerWidth;t.zoomFactor=e/t.canvas.getWidth(),t.zoomIt(t.zoomFactor)},e.instance)throw new Error("Error - use Dashboard.getInstance()")}return e.getInstance=function(){return e.instance=e.instance||new e,e.instance},e}(),l=function(){function e(e){var t=this;this.isVisible=function(){return t.visible},this.hideClock=function(){t.canvas.remove(t.clockGaugeImage),t.visible=!1},this.showClock=function(){t.hideClock(),new steelseries.Clock("gClock",{gaugeType:steelseries.GaugeType.TYPE4,size:170,secondPointerVisible:!0,backgroundVisible:!0,backgroundColor:steelseries.BackgroundColor.BRUSHED_STAINLESS,frameVisible:!1,frameDesign:steelseries.FrameDesign.TILTED_BLACK,minValue:20,maxValue:80,value:45,niceScale:!0,pointerType:steelseries.PointerType.TYPE5});var e=a.getInstance().zoomFactor;t.clockGaugeImage=new fabric.Image(document.getElementById("gClock"),{left:579*e,top:120*e,width:250*e,height:250*e}),t.canvas.add(t.clockGaugeImage),t.canvas.renderAll(),t.visible=!0},this.updateTime=function(){var e=new Date,o=t.checkTime(e.getHours()),n=t.checkTime(e.getMinutes());t.clockText.setText(o+":"+n)},this.checkTime=function(e){return 10>e&&(e="0"+e),e},this.canvas=e,this.clockText=new fabric.Text("21:45",{fontSize:28,textAlign:"center",left:420,top:25,fontFamily:"Arial",fill:"white"}),this.canvas.add(this.clockText),this.updateTime()}return e}();!function(e){e[e.SeatBelt=0]="SeatBelt",e[e.Tempomat=1]="Tempomat",e[e.FrontAssist=2]="FrontAssist",e[e.Engine=3]="Engine",e[e.Headlights=4]="Headlights",e[e.LaneAssist=5]="LaneAssist",e[e.ParkingBrake=6]="ParkingBrake",e[e.ParkingSensors=7]="ParkingSensors",e[e.WaterTemperature=8]="WaterTemperature",e[e.TurnSignals=9]="TurnSignals"}(r||(r={}));var c=function(){function e(e){this.icons={},this.canvas=e}return e.prototype.showIcon=function(e){var t=this,o=this.icons[e];if(void 0==o||!o.isVisible){this.icons[e]={id:e,isVisible:!0};var n=null,i=-1,s=-1;switch(e){case r.Engine:n="/images/Engine.svg",i=675,s=445;break;case r.FrontAssist:n="/images/Frontassist.svg",i=1230,s=300;break;case r.Headlights:n="/images/Headlights.svg",i=615,s=10;break;case r.LaneAssist:n="/images/Laneassist.svg",i=525,s=445;break;case r.ParkingBrake:n="/images/Parkingbrake.svg",i=840,s=445;break;case r.ParkingSensors:n="/images/Parkingsensors.svg",i=1030,s=300;break;case r.SeatBelt:n="/images/Seatbelt.svg",i=900,s=445;break;case r.Tempomat:n="/images/Tempomat.svg",i=465,s=445;break;case r.TurnSignals:n="/images/Turnsignal.svg",i=675,s=10;break;case r.WaterTemperature:n="/images/Temperature.svg",i=960,s=280}null!==n&&-1!==i&&-1!==s&&fabric.loadSVGFromURL(n,function(o){var n=a.getInstance().zoomFactor,r=new fabric.PathGroup(o,{left:i*n,top:s*n});r.scaleX=.7*n,r.scaleY=.7*n,t.canvas.add(r),t.icons[e]={id:e,iconPath:r,isVisible:!0}})}},e.prototype.hideIcon=function(e){var t=this.icons[e];void 0!=t&&t.isVisible&&(t.isVisible=!1,this.canvas.remove(t.iconPath),t.iconPath=null)},e.prototype.showAllIcons=function(){this.showIcon(r.Engine),this.showIcon(r.FrontAssist),this.showIcon(r.Headlights),this.showIcon(r.LaneAssist),this.showIcon(r.ParkingBrake),this.showIcon(r.ParkingSensors),this.showIcon(r.SeatBelt),this.showIcon(r.Tempomat),this.showIcon(r.TurnSignals),this.showIcon(r.WaterTemperature)},e.prototype.hideAllIcons=function(){this.hideIcon(r.Engine),this.hideIcon(r.FrontAssist),this.hideIcon(r.Headlights),this.hideIcon(r.LaneAssist),this.hideIcon(r.ParkingBrake),this.hideIcon(r.ParkingSensors),this.hideIcon(r.SeatBelt),this.hideIcon(r.Tempomat),this.hideIcon(r.TurnSignals),this.hideIcon(r.WaterTemperature)},e}(),u=function(){function e(){var e=this;this.colorOff="lightGray",this.color1="yellow",this.color2="orange",this.color3="orangered",this.color4="red",this.colorLeftLine="red",this.colorRightLine="green",this.isOff=!0,this.circle1=null,this.circle2=null,this.circle3=null,this.circle4=null,this.left=null,this.right=null,this.lineLeft=null,this.lineRight=null,this.update=function(t){if(null!=e.canvas){e.circle1.stroke=e.colorOff,e.circle2.stroke=e.colorOff,e.circle3.stroke=e.colorOff,e.circle4.stroke=e.colorOff,e.left.stroke=e.colorOff,e.right.stroke=e.colorOff,e.lineLeft.fill=e.colorOff,e.lineRight.fill=e.colorOff;var o=t.d;e.isOff||e.miniDisplay.setValue(o),50>o&&o>=30&&(e.circle1.stroke=e.color1),30>o&&o>=20&&(e.circle2.stroke=e.color2),20>o&&o>=10&&(e.circle3.stroke=e.color3),(10>o||t.c)&&(e.circle4.stroke=e.color4),t.l&&(e.left.stroke=e.color4),t.r&&(e.right.stroke=e.color4),t.ll&&(e.lineLeft.fill=e.colorLeftLine),t.rl&&(e.lineRight.fill=e.colorRightLine),t.fa?e.iconsController.showIcon(r.FrontAssist):e.iconsController.hideIcon(r.FrontAssist),e.canvas.renderAll()}},this.turnOff=function(){e.isOff=!0,e.update({d:1e4}),e.drawMiniDisplay()},this.turnOn=function(){e.isOff=!1,e.drawMiniDisplay()},this.init=function(t){var o=-2.618,n=-.5235;o=-2.35619,n=-.785398,e.canvas=t,e.canvas.allowTouchScrolling=!1,e.canvas.setZoom(1),e.circle1=new fabric.Circle({radius:100,left:-10,top:20,angle:0,startAngle:o,endAngle:n,stroke:e.colorOff,strokeWidth:17,fill:"",selectable:!1}),e.circle2=new fabric.Circle({radius:80,left:10,top:40,angle:0,startAngle:o,endAngle:n,stroke:e.colorOff,strokeWidth:17,fill:"",selectable:!1}),e.circle3=new fabric.Circle({radius:60,left:30,top:60,angle:0,startAngle:o,endAngle:n,stroke:e.colorOff,strokeWidth:17,fill:"",selectable:!1}),e.circle4=new fabric.Circle({radius:40,left:50,top:80,angle:0,startAngle:o,endAngle:n,stroke:e.colorOff,strokeWidth:17,fill:"",selectable:!1}),e.left=new fabric.Circle({radius:40,left:50,top:80,angle:0,startAngle:o-.8,endAngle:n-1.65,stroke:e.colorOff,strokeWidth:17,fill:"",selectable:!1}),e.right=new fabric.Circle({radius:40,left:50,top:80,angle:0,startAngle:o+1.65,endAngle:n+.8,stroke:e.colorOff,strokeWidth:17,fill:"",selectable:!1});var i=new fabric.Rect({top:115,left:73,width:50,height:100,fill:"gray",selectable:!1}),r=new fabric.Rect({top:180,left:45,width:25,height:50,fill:"dimgray",selectable:!1}),s=new fabric.Rect({top:180,left:126,width:25,height:50,fill:"dimgray",selectable:!1});e.lineLeft=new fabric.Rect({top:130,left:80,width:10,height:20,fill:e.colorOff,selectable:!1}),e.lineRight=new fabric.Rect({top:130,left:106,width:10,height:20,fill:e.colorOff,selectable:!1});var a=new fabric.Group([e.circle1,e.circle2,e.circle3,e.circle4,e.left,e.right,i,r,s,e.lineLeft,e.lineRight],{left:1078,top:140,width:150,scaleX:1,scaleY:1,lockScalingX:!0,lockScalingY:!0,lockScalingFlip:!0,hasBorders:!1,hasControls:!1});e.canvas.add(a),e.drawMiniDisplay()},this.drawMiniDisplay=function(){null!=e.miniDisplayImage&&e.canvas.remove(e.miniDisplayImage),e.isOff?e.miniDisplay=new steelseries.DisplaySingle("gMini",{width:160,height:60,valuesNumeric:!1,value:"off ",lcdDecimals:0}):e.miniDisplay=new steelseries.DisplaySingle("gMini",{width:160,height:60,unitString:"cm",lcdDecimals:0,unitStringVisible:!0});var t=a.getInstance().zoomFactor;e.miniDisplayImage=new fabric.Image(document.getElementById("gMini"),{left:1073*t,top:360*t,width:160*t,height:60*t}),e.canvas.add(e.miniDisplayImage)}}return e}(),h=function(){function e(){}return e.prototype.put=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),$.ajax({url:f.Current.getBaseAPIUrl()+e,type:"PUT",success:function(o){console.log(e),null!=t&&t(o)},error:function(t){console.log(t+e),null!=o&&o(t)}})},e.Current=new e,e}(),g=function(){function e(){var e=this;this.joystickLeft=null,this.accButton=null,this.brakeButton=null,this.currentSpeed=40,this.showDirectionJoystick=function(){if(null==e.joystickLeft){var t=0;a.getInstance().setCruiseControlSpeed(e.currentSpeed),e.joystickLeft=nipplejs.create({maxNumberOfNipples:1,zone:document.getElementById("jLeft"),mode:"dynamic",size:120,position:{left:"50%",top:"50%"},color:"green"}).on("start end",function(e,t){"end"===e.type&&(h.Current.put("motor/stop"),a.getInstance().stop())}).on("move",function(e,o){var n=o.distance;if(n>10){var i=10*Math.floor(o.angle.degree/10);i!==t&&(h.Current.put("motor/move/"+i),t=i,a.getInstance().move(),i>100&&260>i||80>i||i>280?a.getInstance().showIcon(r.TurnSignals):a.getInstance().hideIcon(r.TurnSignals))}})}}}return e.prototype.init=function(){var e=this;this.accButton=$("#accButton"),this.accButton.click(function(){e.modifySpeed(10)}),this.brakeButton=$("#brakeButton"),this.brakeButton.click(function(){e.modifySpeed(-10)})},e.prototype.show=function(){this.showDirectionJoystick(),this.accButton.show(),this.brakeButton.show()},e.prototype.hide=function(){null!=this.joystickLeft&&(this.joystickLeft.destroy(),this.joystickLeft=null),null!=this.accButton&&this.accButton.hide(),null!=this.brakeButton&&this.brakeButton.hide()},e.prototype.modifySpeed=function(e){var t=this;h.Current.put("motor/speed/"+(this.currentSpeed+e),function(e){t.currentSpeed=e.speed,a.getInstance().setCruiseControlSpeed(t.currentSpeed)})},e}(),f=function(){function e(){var e=this;this.robotIpCookieName="RobotIP",this.robotIP=null,this.show=function(){BootstrapDialog.show({title:"Settings",message:$("<div></div>").load("settings.html"),closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,data:{},onshow:function(e){},onshown:function(t){$("#robotIP").val(e.getRobotIp()),$("#shutdownButton").click(e.executeShutdown),$("#rebootButton").click(e.executeReboot),$("#stopButton").click(e.executeStop)},buttons:[{label:"Close",action:function(e){e.close()}}],onhide:function(t){e.robotIP=$("#robotIP").val(),e.storeRobotIp()}})},this.getBaseServerUrl=function(){return"http://"+e.getRobotIp()},this.getBaseAPIUrl=function(){return"http://"+e.getRobotIp()+":80/ropi/api/v1.0/"},this.getCameraUrl=function(){return e.getBaseServerUrl()+":8080/stream/video.mjpeg"}}return e.prototype.getRobotIp=function(){return this.checkRobotIp(this.robotIP)||(this.robotIP=Cookies.get(this.robotIpCookieName),this.checkRobotIp(this.robotIP)||(this.robotIP=window.location.hostname,this.checkRobotIp(this.robotIP)||(this.robotIP="raspberrypi"))),this.robotIP},e.prototype.storeRobotIp=function(){Cookies.set(this.robotIpCookieName,this.robotIP)},e.prototype.checkRobotIp=function(e){return null!=e&&""!==e&&"undefined"!==e},e.prototype.executeShutdown=function(){BootstrapDialog.confirm({title:"WARNING",message:"You are about to shutdown the Robot.\r\n You won't be able to reach it anymore (power on required)",type:BootstrapDialog.TYPE_DANGER,btnOKLabel:"Yes, shutdown!",btnOKClass:"btn-danger",callback:function(e){e&&h.Current.put("system/shutdown")}})},e.prototype.executeReboot=function(){BootstrapDialog.confirm({title:"WARNING",message:"You are about to reboot the Robot.\r\n Please wait few minutes then reconnect to the Robot.",type:BootstrapDialog.TYPE_WARNING,btnOKLabel:"Yes, reboot!",btnOKClass:"btn-warning",callback:function(e){e&&h.Current.put("system/reboot")}})},e.prototype.executeStop=function(){BootstrapDialog.confirm({title:"WARNING",message:"You are about to stop the server running on the Robot.\r\n You won't be able to reach it anymore (hard reset required)",type:BootstrapDialog.TYPE_DANGER,btnOKLabel:"Yes, stop it!",btnOKClass:"btn-danger",callback:function(e){e&&h.Current.put("quit")}})},e.Current=new e,e}()},{}]},{},[1])(1)});
//# sourceMappingURL=application.min.js.map
