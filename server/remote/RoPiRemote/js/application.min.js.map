{"version":3,"sources":["node_modules/browser-pack/_prelude.js","source/js/application.min.js","application.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","application","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"$","document","ready","Application","run","CameraControl","_this","socketio","robotIpEntry","cameraButton","connectButton","cameraControlsButton","cameraControlsOff","cameraControlsJoystick","cameraControlsSteppedJoystick","robotControls","RobotControls","cameraControls","CameraControls","init","bootstrapToggle","change","processToggleCamera","processRobotToggle","click","selectMode","FollowMeJoystick","SteppedJoystick","disableControlsButton","settingsButton","Settings","Current","show","Dashboard","getInstance","getToggleStatus","toggle","prop","getIsConnected","getIsCameraActive","getIsControlsActive","hide","enableControlsButton","connect","io","getBaseServerUrl","forceNew","on","msg","hideIcon","DashboardIcons","Engine","parkingControl","update","showIcon","emit","disconnect","processToggleControls","startCamera","stopCamera","startEngine","stopEngine","joystickRight","currentTilt","currentPan","step","isBusy","currentCameraControls","sendCameraCommand","command","console","log","RequestsHelper","put","processResult","data","pan","tilt","adjustTilt","offset","adjustPan","prototype","cameraControl","currentDistance","currentInterval","currentDirection","currentPanPercent","currentTiltPercent","joystickSize","distanceMax","Math","floor","centerX","centerY","steppedStart","nipplejs","create","maxNumberOfNipples","zone","getElementById","size","mode","position","left","top","color","evt","type","x","y","clearInterval","direction","panPercent","tiltPercent","angle","destroy","Parking","canvas","fabric","StaticCanvas","zoomFactor","originalWidth","originalHeight","isCameraVisible","cruiseControlSpeed","isMoving","setBackgroundColor","setHeight","setWidth","clockController","DashboardClockController","iconsController","DashboardIconsController","drawMiddleDisplay","drawCameraAndGauges","setInterval","updateTime","cameraInterval","renderAll","onresize","resizeCanvas","tempInterval","callback","showAllIcons","leftGauge","setValue","rightGauge","miniGaugeLeft","miniGaugeRight","setTimeout","hideAllIcons","turnOn","ParkingSensors","Headlights","ParkingBrake","SeatBelt","turnOff","setValueAnimated","setCruiseControlSpeed","speed","needMove","setThreshold","move","Tempomat","stop","TurnSignals","icon","img","onload","hideClock","cameraImage","setElement","width","height","onerror","showClock","src","getCameraUrl","memPercent","cpuPercent","cpuTemp","Image","fromURL","image","add","drawGauges","drawLeftGauge","steelseries","Radial","gaugeType","GaugeType","TYPE3","minValue","maxValue","ledVisible","foregroundType","ForegroundType","frameDesign","FrameDesign","TILTED_BLACK","knobStyle","KnobStyle","SILVER","pointerType","PointerType","TYPE9","lcdDecimals","threshold","tickLabelOrientation","TickLabelOrientation","HORIZONTAL","section","area","titleString","unitString","lcdVisible","useOdometer","odometerParams","digits","backgroundColor","BackgroundColor","CARBON","leftGaugeImage","Linear","TYPE1","backgroundVisible","frameVisible","thresholdVisible","niceScale","foregroundVisible","miniGaugeLeftImage","miniGaugeRightImage","drawRightGauge","RadialBargraph","TYPE2","fractionalScaleDecimals","useValueGradient","rightGaugeImage","Line","stroke","strokeWidth","degreesText","Text","fontSize","textAlign","fontFamily","fill","zoomIt","factor","getHeight","getWidth","backgroundImage","bi","objects","getObjects","scaleX","scaleY","top_1","tempScaleX","tempScaleY","tempLeft","tempTop","setCoords","calcOffset","clientWidth","innerWidth","instance","remove","clockGaugeImage","Clock","TYPE4","secondPointerVisible","BRUSHED_STAINLESS","value","TYPE5","today","Date","h","checkTime","getHours","m","getMinutes","clockText","setText","icons","target","undefined","isVisible","id","path","FrontAssist","LaneAssist","WaterTemperature","loadSVGFromURL","result","PathGroup","iconPath","colorOff","color1","color2","color3","color4","colorLeftLine","colorRightLine","isOff","circle1","circle2","circle3","circle4","right","lineLeft","lineRight","dist","miniDisplay","d","drawMiniDisplay","startAngle","endAngle","allowTouchScrolling","setZoom","Circle","radius","selectable","body","Rect","wleft","wright","Group","lockScalingX","lockScalingY","lockScalingFlip","hasBorders","hasControls","miniDisplayImage","DisplaySingle","valuesNumeric","unitStringVisible","callbackSuccess","callbackError","ajax","url","getBaseAPIUrl","success","error","joystickLeft","accButton","brakeButton","currentSpeed","showDirectionJoystick","currentDirectionAngle","distance","degree","modifySpeed","robotIpCookieName","robotIP","BootstrapDialog","title","message","load","closable","closeByBackdrop","closeByKeyboard","onshow","dialogRef","onshown","val","getRobotIp","executeShutdown","executeReboot","executeStop","buttons","label","action","dialogItself","close","onhide","storeRobotIp","checkRobotIp","Cookies","get","location","hostname","set","ip","confirm","TYPE_DANGER","btnOKLabel","btnOKClass","TYPE_WARNING"],"mappings":"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","file":"application.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","$(document).ready(function () {\n    new Application().run();\n});\nvar Application = (function () {\n    function Application() {\n        var _this = this;\n        this.socketio = null;\n        this.robotIpEntry = null;\n        this.cameraButton = null;\n        this.connectButton = null;\n        this.cameraControlsButton = null;\n        this.cameraControlsOff = null;\n        this.cameraControlsJoystick = null;\n        this.cameraControlsSteppedJoystick = null;\n        this.robotControls = new RobotControls();\n        this.cameraControls = new CameraControls();\n        this.run = function () {\n            _this.robotControls.init();\n            _this.cameraControls.init();\n            _this.cameraButton = $(\"#cameraButton\");\n            _this.cameraButton.bootstrapToggle();\n            _this.cameraButton.change(function () {\n                _this.processToggleCamera();\n            });\n            _this.connectButton = $(\"#connectButton\");\n            _this.connectButton.bootstrapToggle();\n            _this.connectButton.change(function () {\n                _this.processRobotToggle();\n            });\n            _this.cameraControlsButton = $(\"#controlsButtonOptions\");\n            _this.cameraControlsJoystick = $(\"#controlsJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.FollowMeJoystick);\n            });\n            _this.cameraControlsSteppedJoystick = $(\"#controlsSteppedJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.SteppedJoystick);\n            });\n            _this.disableControlsButton();\n            var settingsButton = $(\"#settingsButton\");\n            settingsButton.click(function () {\n                Settings.Current.show();\n            });\n            Dashboard.getInstance().show();\n        };\n        this.getToggleStatus = function (toggle) { return (toggle != null && toggle.prop(\"checked\")); };\n        this.getIsConnected = function () { return _this.getToggleStatus(_this.connectButton); };\n        this.getIsCameraActive = function () { return _this.getToggleStatus(_this.cameraButton); };\n        this.getIsControlsActive = function () { return true; };\n        this.disableControlsButton = function () {\n            _this.cameraControls.hide();\n            _this.cameraControlsButton.prop(\"disabled\", true);\n        };\n        this.enableControlsButton = function () {\n            _this.cameraControlsButton.prop(\"disabled\", false);\n            _this.cameraControls.show();\n        };\n        this.connect = function () {\n            _this.socketio = io.connect(Settings.Current.getBaseServerUrl() + \":80/\", { 'forceNew': true });\n            _this.socketio.on(\"connected\", function (msg) {\n                Dashboard.getInstance().hideIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"disconnected\", function (msg) {\n                _this.connectButton.bootstrapToggle(\"off\");\n                _this.cameraButton.bootstrapToggle(\"off\");\n            });\n            _this.socketio.on(\"parking\", function (msg) {\n                Dashboard.getInstance().parkingControl.update(msg);\n            });\n            _this.socketio.on(\"sysinfo\", function (msg) {\n                Dashboard.getInstance().update(msg);\n            });\n            _this.socketio.on(\"error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"reconnect_error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.emit(\"connect\");\n        };\n        this.disconnect = function () {\n            if (_this.socketio !== null) {\n                _this.socketio.disconnect();\n            }\n        };\n        this.processToggleControls = function () {\n            if (!_this.getIsCameraActive())\n                return;\n        };\n        this.processToggleCamera = function () {\n            if (_this.getIsCameraActive()) {\n                Dashboard.getInstance().startCamera();\n                _this.enableControlsButton();\n            }\n            else {\n                Dashboard.getInstance().stopCamera();\n                _this.cameraControls.hide();\n                _this.disableControlsButton();\n            }\n        };\n        this.processRobotToggle = function () {\n            if (_this.getIsConnected()) {\n                Dashboard.getInstance().startEngine(function () {\n                    _this.connect();\n                    _this.robotControls.show();\n                    if (!_this.getIsCameraActive()) {\n                        _this.cameraButton.bootstrapToggle(\"toggle\");\n                    }\n                    _this.enableControlsButton();\n                });\n            }\n            else {\n                Dashboard.getInstance().stopEngine(function () {\n                    _this.robotControls.hide();\n                    _this.disconnect();\n                    if (!_this.getIsCameraActive()) {\n                        _this.disableControlsButton();\n                    }\n                });\n            }\n        };\n    }\n    return Application;\n}());\nvar CameraControl;\n(function (CameraControl) {\n    CameraControl[CameraControl[\"SteppedJoystick\"] = 0] = \"SteppedJoystick\";\n    CameraControl[CameraControl[\"FollowMeJoystick\"] = 1] = \"FollowMeJoystick\";\n})(CameraControl || (CameraControl = {}));\nvar CameraControls = (function () {\n    function CameraControls() {\n        var _this = this;\n        this.joystickRight = null;\n        this.currentTilt = 95;\n        this.currentPan = 90;\n        this.step = 10;\n        this.isBusy = false;\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        this.sendCameraCommand = function (command) {\n            if (_this.isBusy && command !== \"center\") {\n                console.log(\"Skipped request...\");\n                return;\n            }\n            _this.isBusy = true;\n            RequestsHelper.Current.put(\"servos/\" + command, _this.processResult, function () { return _this.isBusy = false; });\n        };\n        this.processResult = function (data) {\n            var pan = data[\"pan\"];\n            var tilt = data[\"tilt\"];\n            if (pan != null && pan !== -1) {\n                _this.currentPan = pan;\n            }\n            if (tilt != null && tilt !== -1) {\n                _this.currentTilt = data[\"tilt\"];\n            }\n            _this.isBusy = false;\n        };\n        this.adjustTilt = function (offset) { return (_this.currentTilt + offset); };\n        this.adjustPan = function (offset) { return (_this.currentPan + offset); };\n    }\n    CameraControls.prototype.init = function () {\n    };\n    CameraControls.prototype.selectMode = function (cameraControl) {\n        this.currentCameraControls = cameraControl;\n    };\n    CameraControls.prototype.show = function () {\n        var _this = this;\n        var currentDirection = null;\n        var currentDistance;\n        var currentPanPercent = 0;\n        var currentTiltPercent = 0;\n        var joystickSize = 120;\n        var distanceMax = Math.floor(joystickSize / 2);\n        var centerX = 0;\n        var centerY = 0;\n        var currentInterval;\n        var steppedStart = false;\n        this.hide();\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        if (this.joystickRight != null)\n            return;\n        this.joystickRight = nipplejs.create({\n            maxNumberOfNipples: 1,\n            zone: document.getElementById(\"jRight\"),\n            size: joystickSize,\n            mode: \"dynamic\",\n            position: { left: \"50%\", top: \"50%\" },\n            color: \"blue\"\n        }).on(\"start end\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (evt.type === \"start\") {\n                    centerX = data.position.x;\n                    centerY = data.position.y;\n                    console.log(\"centerX:\" + centerX + \"  centerY:\" + centerY);\n                }\n                else {\n                    centerX = 0;\n                    centerY = 0;\n                    _this.sendCameraCommand(\"center\");\n                }\n                currentDirection = null;\n                currentDistance = 0;\n            }\n            else if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                clearInterval(currentInterval);\n                if (evt.type === \"start\") {\n                    steppedStart = true;\n                }\n                else {\n                    _this.sendCameraCommand(\"move/stop\");\n                    if (steppedStart) {\n                        steppedStart = false;\n                        _this.sendCameraCommand(\"center\");\n                    }\n                }\n            }\n        }).on(\"move\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (data == null || data.direction === null || data.position === null)\n                    return;\n                var panPercent = -Math.floor(((data.position.x - centerX) / distanceMax) * 100);\n                var tiltPercent = Math.floor(((data.position.y - centerY) / distanceMax) * 100);\n                if (panPercent > 100 || panPercent < -100 || tiltPercent > 100 || tiltPercent < -100) {\n                    return;\n                }\n                if (panPercent % 2 === 0 || tiltPercent % 2 === 0) {\n                    if (currentPanPercent !== panPercent || currentTiltPercent !== tiltPercent) {\n                        currentPanPercent = panPercent;\n                        currentTiltPercent = tiltPercent;\n                        _this.sendCameraCommand(\"percent/\" + panPercent + \"/\" + tiltPercent);\n                    }\n                }\n            }\n        }).on(\"dir\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                steppedStart = false;\n                var direction = data.direction.angle;\n                console.log(direction);\n                if (currentDirection === direction) {\n                    return;\n                }\n                currentDirection = direction;\n                _this.sendCameraCommand(\"move/\" + currentDirection);\n            }\n        });\n    };\n    CameraControls.prototype.hide = function () {\n        if (this.joystickRight != null) {\n            this.joystickRight.destroy();\n            this.joystickRight = null;\n        }\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n    };\n    return CameraControls;\n}());\nvar Dashboard = (function () {\n    function Dashboard() {\n        var _this = this;\n        this.parkingControl = new Parking();\n        this.canvas = new fabric.StaticCanvas(\"dashboard\");\n        this.zoomFactor = 1;\n        this.originalWidth = 1408;\n        this.originalHeight = 513;\n        this.isCameraVisible = false;\n        this.cruiseControlSpeed = 0;\n        this.isMoving = false;\n        this.show = function () {\n            _this.canvas.setBackgroundColor(\"black\", function () { });\n            _this.canvas.setHeight(_this.originalHeight);\n            _this.canvas.setWidth(_this.originalWidth);\n            _this.clockController = new DashboardClockController(_this.canvas);\n            _this.iconsController = new DashboardIconsController(_this.canvas);\n            _this.parkingControl.iconsController = _this.iconsController;\n            _this.drawMiddleDisplay();\n            _this.drawCameraAndGauges();\n            setInterval(function () {\n                _this.clockController.updateTime();\n                if (_this.cameraInterval == null) {\n                    _this.canvas.renderAll();\n                }\n            }, 1000);\n            window.onresize = _this.resizeCanvas;\n            _this.tempInterval = setInterval(function () {\n                clearInterval(_this.tempInterval);\n                _this.resizeCanvas();\n            }, 500);\n        };\n        this.startEngine = function (callback) {\n            _this.iconsController.showAllIcons();\n            _this.leftGauge.setValue(100);\n            _this.rightGauge.setValue(90);\n            _this.miniGaugeLeft.setValue(100);\n            _this.miniGaugeRight.setValue(100);\n            setTimeout(function () {\n                _this.iconsController.hideAllIcons();\n                _this.leftGauge.setValue(0);\n                _this.rightGauge.setValue(0);\n                _this.miniGaugeLeft.setValue(0);\n                _this.miniGaugeRight.setValue(0);\n                _this.parkingControl.turnOn();\n                _this.showIcon(DashboardIcons.ParkingSensors);\n                _this.showIcon(DashboardIcons.Headlights);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.showIcon(DashboardIcons.SeatBelt);\n                if (callback != null) {\n                    callback();\n                }\n            }, 1500);\n        };\n        this.stopEngine = function (callback) {\n            _this.parkingControl.turnOff();\n            _this.miniGaugeLeft.setValue(0);\n            _this.miniGaugeRight.setValue(0);\n            _this.rightGauge.setValueAnimated(0);\n            _this.iconsController.hideAllIcons();\n            if (callback != null) {\n                callback();\n            }\n        };\n        this.setCruiseControlSpeed = function (speed) {\n            if (_this.leftGauge != null) {\n                var needMove = false;\n                if (_this.cruiseControlSpeed !== speed && _this.isMoving) {\n                    needMove = true;\n                }\n                _this.cruiseControlSpeed = speed;\n                _this.leftGauge.setThreshold(_this.cruiseControlSpeed);\n                if (needMove) {\n                    _this.move();\n                }\n            }\n            if (_this.cruiseControlSpeed === 0) {\n                _this.hideIcon(DashboardIcons.Tempomat);\n            }\n            else {\n                _this.showIcon(DashboardIcons.Tempomat);\n            }\n        };\n        this.move = function () {\n            if (_this.leftGauge != null && _this.cruiseControlSpeed != null && !_this.isMoving) {\n                _this.hideIcon(DashboardIcons.ParkingBrake);\n                _this.isMoving = true;\n                _this.leftGauge.setValueAnimated(_this.cruiseControlSpeed);\n            }\n        };\n        this.stop = function () {\n            if (_this.leftGauge != null) {\n                _this.isMoving = false;\n                _this.leftGauge.setValueAnimated(0);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.hideIcon(DashboardIcons.TurnSignals);\n            }\n        };\n        this.showIcon = function (icon) {\n            _this.iconsController.showIcon(icon);\n        };\n        this.hideIcon = function (icon) {\n            _this.iconsController.hideIcon(icon);\n        };\n        this.startCamera = function () {\n            var img = document.getElementById(\"camera\");\n            img.onload = function () {\n                _this.clockController.hideClock();\n                _this.cameraImage.setElement(img);\n                _this.cameraImage.width = 500;\n                _this.cameraImage.height = 375;\n            };\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = Settings.Current.getCameraUrl();\n            _this.cameraInterval = setInterval(function () {\n                _this.canvas.renderAll();\n            }, 250);\n        };\n        this.stopCamera = function () {\n            if (_this.cameraInterval != null) {\n                clearInterval(_this.cameraInterval);\n                _this.cameraInterval = null;\n            }\n            var img = document.getElementById(\"camera\");\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = \"http://\";\n        };\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                var memPercent = msg[\"mp\"];\n                var cpuPercent = msg[\"cp\"];\n                var cpuTemp = msg[\"ct\"];\n                _this.rightGauge.setValueAnimated(cpuTemp);\n                _this.miniGaugeLeft.setValue(cpuPercent);\n                _this.miniGaugeRight.setValue(memPercent);\n            }\n        };\n        this.drawCameraAndGauges = function () {\n            fabric.Image.fromURL(\"http://\", function (image) {\n                _this.cameraImage = image;\n                var ar = image.height / image.width;\n                image.left = 455;\n                image.top = 60;\n                _this.canvas.add(image);\n                _this.drawGauges();\n            });\n            _this.clockController.showClock();\n        };\n        this.drawLeftGauge = function () {\n            _this.leftGauge = new steelseries.Radial(\"gLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE3,\n                minValue: 0,\n                maxValue: 100,\n                size: 510,\n                ledVisible: false,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                knobStyle: steelseries.KnobStyle.SILVER,\n                pointerType: steelseries.PointerType.TYPE9,\n                lcdDecimals: 0,\n                threshold: 0,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                section: null,\n                area: null,\n                titleString: \"Speed\",\n                unitString: \"%\",\n                lcdVisible: true,\n                useOdometer: true,\n                odometerParams: { digits: 5 },\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var leftGaugeImage = new fabric.Image(document.getElementById(\"gLeft\"), {\n                left: 0,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(leftGaugeImage);\n            _this.miniGaugeLeft = new steelseries.Linear(\"gMiniLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                thresholdVisible: false,\n                lcdVisible: false,\n                niceScale: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeLeftImage = new fabric.Image(document.getElementById(\"gMiniLeft\"), {\n                left: 405,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeLeftImage);\n            _this.miniGaugeRight = new steelseries.Linear(\"gMiniRight\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                lcdVisible: false,\n                niceScale: true,\n                thresholdVisible: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeRightImage = new fabric.Image(document.getElementById(\"gMiniRight\"), {\n                left: 660,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeRightImage);\n        };\n        this.drawRightGauge = function () {\n            _this.rightGauge = new steelseries.RadialBargraph(\"gRight\", {\n                gaugeType: steelseries.GaugeType.TYPE2,\n                minValue: 10,\n                maxValue: 90,\n                size: 510,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                ledVisible: false,\n                niceScale: false,\n                fractionalScaleDecimals: false,\n                useValueGradient: true,\n                section: null,\n                area: null,\n                lcdVisible: false,\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var rightGaugeImage = new fabric.Image(document.getElementById(\"gRight\"), {\n                left: 898,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(rightGaugeImage);\n        };\n        this.drawGauges = function () {\n            _this.drawLeftGauge();\n            _this.drawRightGauge();\n            _this.parkingControl.init(_this.canvas);\n        };\n        this.drawMiddleDisplay = function () {\n            _this.canvas.add(new fabric.Line([400, 59, 1000, 59], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            _this.canvas.add(new fabric.Line([400, 436, 1000, 436], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            var degreesText = new fabric.Text(\"22.5 Â°C\", {\n                fontSize: 28,\n                textAlign: \"center\",\n                left: 890,\n                top: 25,\n                fontFamily: \"Arial\",\n                fill: \"white\"\n            });\n            _this.canvas.add(degreesText);\n        };\n        this.zoomIt = function (factor) {\n            _this.canvas.setHeight(_this.canvas.getHeight() * factor);\n            _this.canvas.setWidth(_this.canvas.getWidth() * factor);\n            if (_this.canvas.backgroundImage) {\n                var bi = _this.canvas.backgroundImage;\n                bi.width = bi.width * factor;\n                bi.height = bi.height * factor;\n            }\n            var objects = _this.canvas.getObjects();\n            for (var i in objects) {\n                var scaleX = objects[i].scaleX;\n                var scaleY = objects[i].scaleY;\n                var left = objects[i].left;\n                var top_1 = objects[i].top;\n                var tempScaleX = scaleX * factor;\n                var tempScaleY = scaleY * factor;\n                var tempLeft = left * factor;\n                var tempTop = top_1 * factor;\n                objects[i].scaleX = tempScaleX;\n                objects[i].scaleY = tempScaleY;\n                objects[i].left = tempLeft;\n                objects[i].top = tempTop;\n                objects[i].setCoords();\n            }\n            _this.canvas.renderAll();\n            _this.canvas.calcOffset();\n        };\n        this.resizeCanvas = function () {\n            var clientWidth = window.innerWidth;\n            _this.zoomFactor = clientWidth / _this.canvas.getWidth();\n            _this.zoomIt(_this.zoomFactor);\n        };\n        if (Dashboard.instance) {\n            throw new Error(\"Error - use Dashboard.getInstance()\");\n        }\n    }\n    Dashboard.getInstance = function () {\n        Dashboard.instance = Dashboard.instance || new Dashboard();\n        return Dashboard.instance;\n    };\n    return Dashboard;\n}());\nvar DashboardClockController = (function () {\n    function DashboardClockController(canvas) {\n        var _this = this;\n        this.hideClock = function () {\n            _this.canvas.remove(_this.clockGaugeImage);\n        };\n        this.showClock = function () {\n            _this.hideClock();\n            new steelseries.Clock(\"gClock\", {\n                gaugeType: steelseries.GaugeType.TYPE4,\n                size: 170,\n                secondPointerVisible: true,\n                backgroundVisible: true,\n                backgroundColor: steelseries.BackgroundColor.BRUSHED_STAINLESS,\n                frameVisible: false,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                minValue: 20,\n                maxValue: 80,\n                value: 45,\n                niceScale: true,\n                pointerType: steelseries.PointerType.TYPE5,\n            });\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.clockGaugeImage = new fabric.Image(document.getElementById(\"gClock\"), {\n                left: 579 * factor,\n                top: 120 * factor,\n                width: 250 * factor,\n                height: 250 * factor\n            });\n            _this.canvas.add(_this.clockGaugeImage);\n            _this.canvas.renderAll();\n        };\n        this.updateTime = function () {\n            var today = new Date();\n            var h = _this.checkTime(today.getHours());\n            var m = _this.checkTime(today.getMinutes());\n            _this.clockText.setText(h + \":\" + m);\n        };\n        this.checkTime = function (i) {\n            if (i < 10) {\n                i = \"0\" + i;\n            }\n            ;\n            return i;\n        };\n        this.canvas = canvas;\n        this.clockText = new fabric.Text(\"21:45\", {\n            fontSize: 28,\n            textAlign: \"center\",\n            left: 420,\n            top: 25,\n            fontFamily: \"Arial\",\n            fill: \"white\"\n        });\n        this.canvas.add(this.clockText);\n        this.updateTime();\n    }\n    return DashboardClockController;\n}());\nvar DashboardIcons;\n(function (DashboardIcons) {\n    DashboardIcons[DashboardIcons[\"SeatBelt\"] = 0] = \"SeatBelt\";\n    DashboardIcons[DashboardIcons[\"Tempomat\"] = 1] = \"Tempomat\";\n    DashboardIcons[DashboardIcons[\"FrontAssist\"] = 2] = \"FrontAssist\";\n    DashboardIcons[DashboardIcons[\"Engine\"] = 3] = \"Engine\";\n    DashboardIcons[DashboardIcons[\"Headlights\"] = 4] = \"Headlights\";\n    DashboardIcons[DashboardIcons[\"LaneAssist\"] = 5] = \"LaneAssist\";\n    DashboardIcons[DashboardIcons[\"ParkingBrake\"] = 6] = \"ParkingBrake\";\n    DashboardIcons[DashboardIcons[\"ParkingSensors\"] = 7] = \"ParkingSensors\";\n    DashboardIcons[DashboardIcons[\"WaterTemperature\"] = 8] = \"WaterTemperature\";\n    DashboardIcons[DashboardIcons[\"TurnSignals\"] = 9] = \"TurnSignals\";\n})(DashboardIcons || (DashboardIcons = {}));\nvar DashboardIconsController = (function () {\n    function DashboardIconsController(canvas) {\n        this.icons = {};\n        this.canvas = canvas;\n    }\n    DashboardIconsController.prototype.showIcon = function (target) {\n        var _this = this;\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            return;\n        }\n        else {\n            this.icons[target] = { id: target, isVisible: true };\n        }\n        var path = null;\n        var left = -1;\n        var top = -1;\n        switch (target) {\n            case DashboardIcons.Engine:\n                path = \"/images/Engine.svg\";\n                left = 675;\n                top = 445;\n                break;\n            case DashboardIcons.FrontAssist:\n                path = \"/images/Frontassist.svg\";\n                left = 1230;\n                top = 300;\n                break;\n            case DashboardIcons.Headlights:\n                path = \"/images/Headlights.svg\";\n                left = 615;\n                top = 10;\n                break;\n            case DashboardIcons.LaneAssist:\n                path = \"/images/Laneassist.svg\";\n                left = 525;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingBrake:\n                path = \"/images/Parkingbrake.svg\";\n                left = 840;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingSensors:\n                path = \"/images/Parkingsensors.svg\";\n                left = 1030;\n                top = 300;\n                break;\n            case DashboardIcons.SeatBelt:\n                path = \"/images/Seatbelt.svg\";\n                left = 900;\n                top = 445;\n                break;\n            case DashboardIcons.Tempomat:\n                path = \"/images/Tempomat.svg\";\n                left = 465;\n                top = 445;\n                break;\n            case DashboardIcons.TurnSignals:\n                path = \"/images/Turnsignal.svg\";\n                left = 675;\n                top = 10;\n                break;\n            case DashboardIcons.WaterTemperature:\n                path = \"/images/Temperature.svg\";\n                left = 960;\n                top = 280;\n                break;\n        }\n        if (path !== null && left !== -1 && top !== -1) {\n            fabric.loadSVGFromURL(path, function (objects) {\n                var factor = Dashboard.getInstance().zoomFactor;\n                var result = new fabric.PathGroup(objects, {\n                    left: left * factor,\n                    top: top * factor\n                });\n                result.scaleX = 0.7 * factor;\n                result.scaleY = 0.7 * factor;\n                _this.canvas.add(result);\n                _this.icons[target] = { id: target, iconPath: result, isVisible: true };\n            });\n        }\n    };\n    DashboardIconsController.prototype.hideIcon = function (target) {\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            icon.isVisible = false;\n            this.canvas.remove(icon.iconPath);\n            icon.iconPath = null;\n        }\n    };\n    DashboardIconsController.prototype.showAllIcons = function () {\n        this.showIcon(DashboardIcons.Engine);\n        this.showIcon(DashboardIcons.FrontAssist);\n        this.showIcon(DashboardIcons.Headlights);\n        this.showIcon(DashboardIcons.LaneAssist);\n        this.showIcon(DashboardIcons.ParkingBrake);\n        this.showIcon(DashboardIcons.ParkingSensors);\n        this.showIcon(DashboardIcons.SeatBelt);\n        this.showIcon(DashboardIcons.Tempomat);\n        this.showIcon(DashboardIcons.TurnSignals);\n        this.showIcon(DashboardIcons.WaterTemperature);\n    };\n    DashboardIconsController.prototype.hideAllIcons = function () {\n        this.hideIcon(DashboardIcons.Engine);\n        this.hideIcon(DashboardIcons.FrontAssist);\n        this.hideIcon(DashboardIcons.Headlights);\n        this.hideIcon(DashboardIcons.LaneAssist);\n        this.hideIcon(DashboardIcons.ParkingBrake);\n        this.hideIcon(DashboardIcons.ParkingSensors);\n        this.hideIcon(DashboardIcons.SeatBelt);\n        this.hideIcon(DashboardIcons.Tempomat);\n        this.hideIcon(DashboardIcons.TurnSignals);\n        this.hideIcon(DashboardIcons.WaterTemperature);\n    };\n    return DashboardIconsController;\n}());\nvar Parking = (function () {\n    function Parking() {\n        var _this = this;\n        this.colorOff = \"lightGray\";\n        this.color1 = \"yellow\";\n        this.color2 = \"orange\";\n        this.color3 = \"orangered\";\n        this.color4 = \"red\";\n        this.colorLeftLine = \"red\";\n        this.colorRightLine = \"green\";\n        this.isOff = true;\n        this.circle1 = null;\n        this.circle2 = null;\n        this.circle3 = null;\n        this.circle4 = null;\n        this.left = null;\n        this.right = null;\n        this.lineLeft = null;\n        this.lineRight = null;\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                _this.circle1.stroke = _this.colorOff;\n                _this.circle2.stroke = _this.colorOff;\n                _this.circle3.stroke = _this.colorOff;\n                _this.circle4.stroke = _this.colorOff;\n                _this.left.stroke = _this.colorOff;\n                _this.right.stroke = _this.colorOff;\n                _this.lineLeft.fill = _this.colorOff;\n                _this.lineRight.fill = _this.colorOff;\n                var dist = msg[\"d\"];\n                if (!_this.isOff) {\n                    _this.miniDisplay.setValue(dist);\n                }\n                if (dist < 50 && dist >= 30) {\n                    _this.circle1.stroke = _this.color1;\n                }\n                if (dist < 30 && dist >= 20) {\n                    _this.circle2.stroke = _this.color2;\n                }\n                if (dist < 20 && dist >= 10) {\n                    _this.circle3.stroke = _this.color3;\n                }\n                if (dist < 10 || msg[\"c\"]) {\n                    _this.circle4.stroke = _this.color4;\n                }\n                if (msg[\"l\"]) {\n                    _this.left.stroke = _this.color4;\n                }\n                if (msg[\"r\"]) {\n                    _this.right.stroke = _this.color4;\n                }\n                if (msg[\"ll\"]) {\n                    _this.lineLeft.fill = _this.colorLeftLine;\n                }\n                if (msg[\"rl\"]) {\n                    _this.lineRight.fill = _this.colorRightLine;\n                }\n                if (msg[\"fa\"]) {\n                    _this.iconsController.showIcon(DashboardIcons.FrontAssist);\n                }\n                else {\n                    _this.iconsController.hideIcon(DashboardIcons.FrontAssist);\n                }\n                _this.canvas.renderAll();\n            }\n        };\n        this.turnOff = function () {\n            _this.isOff = true;\n            _this.update({ \"d\": 10000 });\n            _this.drawMiniDisplay();\n        };\n        this.turnOn = function () {\n            _this.isOff = false;\n            _this.drawMiniDisplay();\n        };\n        this.init = function (canvas) {\n            var startAngle = -2.618;\n            var endAngle = -0.5235;\n            startAngle = -2.35619;\n            endAngle = -0.785398;\n            _this.canvas = canvas;\n            _this.canvas.allowTouchScrolling = false;\n            _this.canvas.setZoom(1);\n            _this.circle1 = new fabric.Circle({\n                radius: 100,\n                left: -10,\n                top: 20,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle2 = new fabric.Circle({\n                radius: 80,\n                left: 10,\n                top: 40,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle3 = new fabric.Circle({\n                radius: 60,\n                left: 30,\n                top: 60,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle4 = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.left = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle - 0.8,\n                endAngle: endAngle - 1.65,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.right = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle + 1.65,\n                endAngle: endAngle + 0.8,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            var body = new fabric.Rect({\n                top: 115,\n                left: 73,\n                width: 50,\n                height: 100,\n                fill: \"gray\",\n                selectable: false\n            });\n            var wleft = new fabric.Rect({\n                top: 180,\n                left: 45,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            var wright = new fabric.Rect({\n                top: 180,\n                left: 126,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            _this.lineLeft = new fabric.Rect({\n                top: 130,\n                left: 80,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            _this.lineRight = new fabric.Rect({\n                top: 130,\n                left: 106,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            var parkingControl = new fabric.Group([\n                _this.circle1, _this.circle2, _this.circle3, _this.circle4, _this.left, _this.right,\n                body, wleft, wright, _this.lineLeft, _this.lineRight\n            ], {\n                left: 1078,\n                top: 140,\n                width: 150,\n                scaleX: 1,\n                scaleY: 1,\n                lockScalingX: true,\n                lockScalingY: true,\n                lockScalingFlip: true,\n                hasBorders: false,\n                hasControls: false\n            });\n            _this.canvas.add(parkingControl);\n            _this.drawMiniDisplay();\n        };\n        this.drawMiniDisplay = function () {\n            if (_this.miniDisplayImage != null) {\n                _this.canvas.remove(_this.miniDisplayImage);\n            }\n            if (_this.isOff) {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    valuesNumeric: false,\n                    value: \"off \",\n                    lcdDecimals: 0\n                });\n            }\n            else {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    unitString: \"cm\",\n                    lcdDecimals: 0,\n                    unitStringVisible: true\n                });\n            }\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.miniDisplayImage = new fabric.Image(document.getElementById(\"gMini\"), {\n                left: 1073 * factor,\n                top: 360 * factor,\n                width: 160 * factor,\n                height: 60 * factor\n            });\n            _this.canvas.add(_this.miniDisplayImage);\n        };\n    }\n    return Parking;\n}());\n;\nvar RequestsHelper = (function () {\n    function RequestsHelper() {\n    }\n    RequestsHelper.prototype.put = function (command, callbackSuccess, callbackError) {\n        if (callbackSuccess === void 0) { callbackSuccess = null; }\n        if (callbackError === void 0) { callbackError = null; }\n        $.ajax({\n            url: Settings.Current.getBaseAPIUrl() + command,\n            type: \"PUT\",\n            success: function (result) {\n                console.log(command);\n                if (callbackSuccess != null) {\n                    callbackSuccess(result);\n                }\n            },\n            error: function (result) {\n                console.log(result + command);\n                if (callbackError != null) {\n                    callbackError(result);\n                }\n            }\n        });\n    };\n    RequestsHelper.Current = new RequestsHelper();\n    return RequestsHelper;\n}());\nvar RobotControls = (function () {\n    function RobotControls() {\n        var _this = this;\n        this.joystickLeft = null;\n        this.accButton = null;\n        this.brakeButton = null;\n        this.currentSpeed = 40;\n        this.showDirectionJoystick = function () {\n            if (_this.joystickLeft != null)\n                return;\n            var currentDirectionAngle = 0;\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n            _this.joystickLeft = nipplejs.create({\n                maxNumberOfNipples: 1,\n                zone: document.getElementById(\"jLeft\"),\n                mode: \"dynamic\",\n                size: 120,\n                position: { left: \"50%\", top: \"50%\" },\n                color: \"green\"\n            }).on(\"start end\", function (evt, data) {\n                if (evt.type === \"end\") {\n                    RequestsHelper.Current.put(\"motor/stop\");\n                    Dashboard.getInstance().stop();\n                }\n            }).on(\"move\", function (evt, data) {\n                var dist = data.distance;\n                if (dist > 10) {\n                    var angle = Math.floor(data.angle.degree / 10) * 10;\n                    if (angle !== currentDirectionAngle) {\n                        RequestsHelper.Current.put(\"motor/move/\" + angle);\n                        currentDirectionAngle = angle;\n                        Dashboard.getInstance().move();\n                        if ((angle > 100 && angle < 260) || angle < 80 || angle > 280) {\n                            Dashboard.getInstance().showIcon(DashboardIcons.TurnSignals);\n                        }\n                        else {\n                            Dashboard.getInstance().hideIcon(DashboardIcons.TurnSignals);\n                        }\n                    }\n                }\n            });\n        };\n    }\n    RobotControls.prototype.init = function () {\n        var _this = this;\n        this.accButton = $(\"#accButton\");\n        this.accButton.click(function () {\n            _this.modifySpeed(+10);\n        });\n        this.brakeButton = $(\"#brakeButton\");\n        this.brakeButton.click(function () {\n            _this.modifySpeed(-10);\n        });\n    };\n    RobotControls.prototype.show = function () {\n        this.showDirectionJoystick();\n        this.accButton.show();\n        this.brakeButton.show();\n    };\n    RobotControls.prototype.hide = function () {\n        if (this.joystickLeft != null) {\n            this.joystickLeft.destroy();\n            this.joystickLeft = null;\n        }\n        if (this.accButton != null) {\n            this.accButton.hide();\n        }\n        if (this.brakeButton != null) {\n            this.brakeButton.hide();\n        }\n    };\n    RobotControls.prototype.modifySpeed = function (speed) {\n        var _this = this;\n        RequestsHelper.Current.put(\"motor/speed/\" + (this.currentSpeed + speed), function (data) {\n            _this.currentSpeed = data[\"speed\"];\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n        });\n    };\n    return RobotControls;\n}());\nvar Settings = (function () {\n    function Settings() {\n        var _this = this;\n        this.robotIpCookieName = \"RobotIP\";\n        this.robotIP = null;\n        this.show = function () {\n            BootstrapDialog.show({\n                title: \"Settings\",\n                message: $(\"<div></div>\").load(\"settings.html\"),\n                closable: true,\n                closeByBackdrop: true,\n                closeByKeyboard: true,\n                data: {},\n                onshow: function (dialogRef) {\n                },\n                onshown: function (dialogRef) {\n                    $(\"#robotIP\").val(_this.getRobotIp());\n                    $(\"#shutdownButton\").click(_this.executeShutdown);\n                    $(\"#rebootButton\").click(_this.executeReboot);\n                    $(\"#stopButton\").click(_this.executeStop);\n                },\n                buttons: [\n                    {\n                        label: \"Close\",\n                        action: function (dialogItself) {\n                            dialogItself.close();\n                        }\n                    }\n                ],\n                onhide: function (dialogRef) {\n                    _this.robotIP = $(\"#robotIP\").val();\n                    _this.storeRobotIp();\n                }\n            });\n        };\n        this.getBaseServerUrl = function () {\n            return \"http://\" + _this.getRobotIp();\n        };\n        this.getBaseAPIUrl = function () {\n            return \"http://\" + _this.getRobotIp() + \":80/ropi/api/v1.0/\";\n        };\n        this.getCameraUrl = function () {\n            return _this.getBaseServerUrl() + \":8080/stream/video.mjpeg\";\n        };\n    }\n    Settings.prototype.getRobotIp = function () {\n        if (!this.checkRobotIp(this.robotIP)) {\n            this.robotIP = Cookies.get(this.robotIpCookieName);\n            if (!this.checkRobotIp(this.robotIP)) {\n                this.robotIP = window.location.hostname;\n                if (!this.checkRobotIp(this.robotIP)) {\n                    this.robotIP = \"raspberrypi\";\n                }\n            }\n        }\n        return this.robotIP;\n    };\n    Settings.prototype.storeRobotIp = function () {\n        Cookies.set(this.robotIpCookieName, this.robotIP);\n    };\n    Settings.prototype.checkRobotIp = function (ip) {\n        return ip != null && ip !== \"\" && ip !== \"undefined\";\n    };\n    Settings.prototype.executeShutdown = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to shutdown the Robot.\\r\\n You won't be able to reach it anymore (power on required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, shutdown!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/shutdown\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeReboot = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to reboot the Robot.\\r\\n Please wait few minutes then reconnect to the Robot.\",\n            type: BootstrapDialog.TYPE_WARNING,\n            btnOKLabel: \"Yes, reboot!\",\n            btnOKClass: \"btn-warning\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/reboot\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeStop = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to stop the server running on the Robot.\\r\\n You won't be able to reach it anymore (hard reset required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, stop it!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"quit\");\n                }\n            }\n        });\n    };\n    Settings.Current = new Settings();\n    return Settings;\n}());\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.application = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n$(document).ready(function () {\n    new Application().run();\n});\nvar Application = (function () {\n    function Application() {\n        var _this = this;\n        this.socketio = null;\n        this.robotIpEntry = null;\n        this.cameraButton = null;\n        this.connectButton = null;\n        this.cameraControlsButton = null;\n        this.cameraControlsOff = null;\n        this.cameraControlsJoystick = null;\n        this.cameraControlsSteppedJoystick = null;\n        this.robotControls = new RobotControls();\n        this.cameraControls = new CameraControls();\n        this.run = function () {\n            _this.robotControls.init();\n            _this.cameraControls.init();\n            _this.cameraButton = $(\"#cameraButton\");\n            _this.cameraButton.bootstrapToggle();\n            _this.cameraButton.change(function () {\n                _this.processToggleCamera();\n            });\n            _this.connectButton = $(\"#connectButton\");\n            _this.connectButton.bootstrapToggle();\n            _this.connectButton.change(function () {\n                _this.processRobotToggle();\n            });\n            _this.cameraControlsButton = $(\"#controlsButtonOptions\");\n            _this.cameraControlsJoystick = $(\"#controlsJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.FollowMeJoystick);\n            });\n            _this.cameraControlsSteppedJoystick = $(\"#controlsSteppedJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.SteppedJoystick);\n            });\n            _this.disableControlsButton();\n            var settingsButton = $(\"#settingsButton\");\n            settingsButton.click(function () {\n                Settings.Current.show();\n            });\n            Dashboard.getInstance().show();\n        };\n        this.getToggleStatus = function (toggle) { return (toggle != null && toggle.prop(\"checked\")); };\n        this.getIsConnected = function () { return _this.getToggleStatus(_this.connectButton); };\n        this.getIsCameraActive = function () { return _this.getToggleStatus(_this.cameraButton); };\n        this.getIsControlsActive = function () { return true; };\n        this.disableControlsButton = function () {\n            _this.cameraControls.hide();\n            _this.cameraControlsButton.prop(\"disabled\", true);\n        };\n        this.enableControlsButton = function () {\n            _this.cameraControlsButton.prop(\"disabled\", false);\n            _this.cameraControls.show();\n        };\n        this.connect = function () {\n            _this.socketio = io.connect(Settings.Current.getBaseServerUrl() + \":80/\", { 'forceNew': true });\n            _this.socketio.on(\"connected\", function (msg) {\n                Dashboard.getInstance().hideIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"disconnected\", function (msg) {\n                _this.connectButton.bootstrapToggle(\"off\");\n                _this.cameraButton.bootstrapToggle(\"off\");\n            });\n            _this.socketio.on(\"parking\", function (msg) {\n                Dashboard.getInstance().parkingControl.update(msg);\n            });\n            _this.socketio.on(\"sysinfo\", function (msg) {\n                Dashboard.getInstance().update(msg);\n            });\n            _this.socketio.on(\"error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"reconnect_error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.emit(\"connect\");\n        };\n        this.disconnect = function () {\n            if (_this.socketio !== null) {\n                _this.socketio.disconnect();\n            }\n        };\n        this.processToggleControls = function () {\n            if (!_this.getIsCameraActive())\n                return;\n        };\n        this.processToggleCamera = function () {\n            if (_this.getIsCameraActive()) {\n                Dashboard.getInstance().startCamera();\n                _this.enableControlsButton();\n            }\n            else {\n                Dashboard.getInstance().stopCamera();\n                _this.cameraControls.hide();\n                _this.disableControlsButton();\n            }\n        };\n        this.processRobotToggle = function () {\n            if (_this.getIsConnected()) {\n                Dashboard.getInstance().startEngine(function () {\n                    _this.connect();\n                    _this.robotControls.show();\n                    if (!_this.getIsCameraActive()) {\n                        _this.cameraButton.bootstrapToggle(\"toggle\");\n                    }\n                    _this.enableControlsButton();\n                });\n            }\n            else {\n                Dashboard.getInstance().stopEngine(function () {\n                    _this.robotControls.hide();\n                    _this.disconnect();\n                    if (!_this.getIsCameraActive()) {\n                        _this.disableControlsButton();\n                    }\n                });\n            }\n        };\n    }\n    return Application;\n}());\nvar CameraControl;\n(function (CameraControl) {\n    CameraControl[CameraControl[\"SteppedJoystick\"] = 0] = \"SteppedJoystick\";\n    CameraControl[CameraControl[\"FollowMeJoystick\"] = 1] = \"FollowMeJoystick\";\n})(CameraControl || (CameraControl = {}));\nvar CameraControls = (function () {\n    function CameraControls() {\n        var _this = this;\n        this.joystickRight = null;\n        this.currentTilt = 95;\n        this.currentPan = 90;\n        this.step = 10;\n        this.isBusy = false;\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        this.sendCameraCommand = function (command) {\n            if (_this.isBusy && command !== \"center\") {\n                console.log(\"Skipped request...\");\n                return;\n            }\n            _this.isBusy = true;\n            RequestsHelper.Current.put(\"servos/\" + command, _this.processResult, function () { return _this.isBusy = false; });\n        };\n        this.processResult = function (data) {\n            var pan = data[\"pan\"];\n            var tilt = data[\"tilt\"];\n            if (pan != null && pan !== -1) {\n                _this.currentPan = pan;\n            }\n            if (tilt != null && tilt !== -1) {\n                _this.currentTilt = data[\"tilt\"];\n            }\n            _this.isBusy = false;\n        };\n        this.adjustTilt = function (offset) { return (_this.currentTilt + offset); };\n        this.adjustPan = function (offset) { return (_this.currentPan + offset); };\n    }\n    CameraControls.prototype.init = function () {\n    };\n    CameraControls.prototype.selectMode = function (cameraControl) {\n        this.currentCameraControls = cameraControl;\n    };\n    CameraControls.prototype.show = function () {\n        var _this = this;\n        var currentDirection = null;\n        var currentDistance;\n        var currentPanPercent = 0;\n        var currentTiltPercent = 0;\n        var joystickSize = 120;\n        var distanceMax = Math.floor(joystickSize / 2);\n        var centerX = 0;\n        var centerY = 0;\n        var currentInterval;\n        var steppedStart = false;\n        this.hide();\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        if (this.joystickRight != null)\n            return;\n        this.joystickRight = nipplejs.create({\n            maxNumberOfNipples: 1,\n            zone: document.getElementById(\"jRight\"),\n            size: joystickSize,\n            mode: \"dynamic\",\n            position: { left: \"50%\", top: \"50%\" },\n            color: \"blue\"\n        }).on(\"start end\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (evt.type === \"start\") {\n                    centerX = data.position.x;\n                    centerY = data.position.y;\n                    console.log(\"centerX:\" + centerX + \"  centerY:\" + centerY);\n                }\n                else {\n                    centerX = 0;\n                    centerY = 0;\n                    _this.sendCameraCommand(\"center\");\n                }\n                currentDirection = null;\n                currentDistance = 0;\n            }\n            else if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                clearInterval(currentInterval);\n                if (evt.type === \"start\") {\n                    steppedStart = true;\n                }\n                else {\n                    _this.sendCameraCommand(\"move/stop\");\n                    if (steppedStart) {\n                        steppedStart = false;\n                        _this.sendCameraCommand(\"center\");\n                    }\n                }\n            }\n        }).on(\"move\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (data == null || data.direction === null || data.position === null)\n                    return;\n                var panPercent = -Math.floor(((data.position.x - centerX) / distanceMax) * 100);\n                var tiltPercent = Math.floor(((data.position.y - centerY) / distanceMax) * 100);\n                if (panPercent > 100 || panPercent < -100 || tiltPercent > 100 || tiltPercent < -100) {\n                    return;\n                }\n                if (panPercent % 2 === 0 || tiltPercent % 2 === 0) {\n                    if (currentPanPercent !== panPercent || currentTiltPercent !== tiltPercent) {\n                        currentPanPercent = panPercent;\n                        currentTiltPercent = tiltPercent;\n                        _this.sendCameraCommand(\"percent/\" + panPercent + \"/\" + tiltPercent);\n                    }\n                }\n            }\n        }).on(\"dir\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                steppedStart = false;\n                var direction = data.direction.angle;\n                console.log(direction);\n                if (currentDirection === direction) {\n                    return;\n                }\n                currentDirection = direction;\n                _this.sendCameraCommand(\"move/\" + currentDirection);\n            }\n        });\n    };\n    CameraControls.prototype.hide = function () {\n        if (this.joystickRight != null) {\n            this.joystickRight.destroy();\n            this.joystickRight = null;\n        }\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n    };\n    return CameraControls;\n}());\nvar Dashboard = (function () {\n    function Dashboard() {\n        var _this = this;\n        this.parkingControl = new Parking();\n        this.canvas = new fabric.StaticCanvas(\"dashboard\");\n        this.zoomFactor = 1;\n        this.originalWidth = 1408;\n        this.originalHeight = 513;\n        this.isCameraVisible = false;\n        this.cruiseControlSpeed = 0;\n        this.isMoving = false;\n        this.show = function () {\n            _this.canvas.setBackgroundColor(\"black\", function () { });\n            _this.canvas.setHeight(_this.originalHeight);\n            _this.canvas.setWidth(_this.originalWidth);\n            _this.clockController = new DashboardClockController(_this.canvas);\n            _this.iconsController = new DashboardIconsController(_this.canvas);\n            _this.parkingControl.iconsController = _this.iconsController;\n            _this.drawMiddleDisplay();\n            _this.drawCameraAndGauges();\n            setInterval(function () {\n                _this.clockController.updateTime();\n                if (_this.cameraInterval == null) {\n                    _this.canvas.renderAll();\n                }\n            }, 1000);\n            window.onresize = _this.resizeCanvas;\n            _this.tempInterval = setInterval(function () {\n                clearInterval(_this.tempInterval);\n                _this.resizeCanvas();\n            }, 500);\n        };\n        this.startEngine = function (callback) {\n            _this.iconsController.showAllIcons();\n            _this.leftGauge.setValue(100);\n            _this.rightGauge.setValue(90);\n            _this.miniGaugeLeft.setValue(100);\n            _this.miniGaugeRight.setValue(100);\n            setTimeout(function () {\n                _this.iconsController.hideAllIcons();\n                _this.leftGauge.setValue(0);\n                _this.rightGauge.setValue(0);\n                _this.miniGaugeLeft.setValue(0);\n                _this.miniGaugeRight.setValue(0);\n                _this.parkingControl.turnOn();\n                _this.showIcon(DashboardIcons.ParkingSensors);\n                _this.showIcon(DashboardIcons.Headlights);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.showIcon(DashboardIcons.SeatBelt);\n                if (callback != null) {\n                    callback();\n                }\n            }, 1500);\n        };\n        this.stopEngine = function (callback) {\n            _this.parkingControl.turnOff();\n            _this.miniGaugeLeft.setValue(0);\n            _this.miniGaugeRight.setValue(0);\n            _this.rightGauge.setValueAnimated(0);\n            _this.iconsController.hideAllIcons();\n            if (callback != null) {\n                callback();\n            }\n        };\n        this.setCruiseControlSpeed = function (speed) {\n            if (_this.leftGauge != null) {\n                var needMove = false;\n                if (_this.cruiseControlSpeed !== speed && _this.isMoving) {\n                    needMove = true;\n                }\n                _this.cruiseControlSpeed = speed;\n                _this.leftGauge.setThreshold(_this.cruiseControlSpeed);\n                if (needMove) {\n                    _this.move();\n                }\n            }\n            if (_this.cruiseControlSpeed === 0) {\n                _this.hideIcon(DashboardIcons.Tempomat);\n            }\n            else {\n                _this.showIcon(DashboardIcons.Tempomat);\n            }\n        };\n        this.move = function () {\n            if (_this.leftGauge != null && _this.cruiseControlSpeed != null && !_this.isMoving) {\n                _this.hideIcon(DashboardIcons.ParkingBrake);\n                _this.isMoving = true;\n                _this.leftGauge.setValueAnimated(_this.cruiseControlSpeed);\n            }\n        };\n        this.stop = function () {\n            if (_this.leftGauge != null) {\n                _this.isMoving = false;\n                _this.leftGauge.setValueAnimated(0);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.hideIcon(DashboardIcons.TurnSignals);\n            }\n        };\n        this.showIcon = function (icon) {\n            _this.iconsController.showIcon(icon);\n        };\n        this.hideIcon = function (icon) {\n            _this.iconsController.hideIcon(icon);\n        };\n        this.startCamera = function () {\n            var img = document.getElementById(\"camera\");\n            img.onload = function () {\n                _this.clockController.hideClock();\n                _this.cameraImage.setElement(img);\n                _this.cameraImage.width = 500;\n                _this.cameraImage.height = 375;\n            };\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = Settings.Current.getCameraUrl();\n            _this.cameraInterval = setInterval(function () {\n                _this.canvas.renderAll();\n            }, 250);\n        };\n        this.stopCamera = function () {\n            if (_this.cameraInterval != null) {\n                clearInterval(_this.cameraInterval);\n                _this.cameraInterval = null;\n            }\n            var img = document.getElementById(\"camera\");\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = \"http://\";\n        };\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                var memPercent = msg[\"mp\"];\n                var cpuPercent = msg[\"cp\"];\n                var cpuTemp = msg[\"ct\"];\n                _this.rightGauge.setValueAnimated(cpuTemp);\n                _this.miniGaugeLeft.setValue(cpuPercent);\n                _this.miniGaugeRight.setValue(memPercent);\n            }\n        };\n        this.drawCameraAndGauges = function () {\n            fabric.Image.fromURL(\"http://\", function (image) {\n                _this.cameraImage = image;\n                var ar = image.height / image.width;\n                image.left = 455;\n                image.top = 60;\n                _this.canvas.add(image);\n                _this.drawGauges();\n            });\n            _this.clockController.showClock();\n        };\n        this.drawLeftGauge = function () {\n            _this.leftGauge = new steelseries.Radial(\"gLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE3,\n                minValue: 0,\n                maxValue: 100,\n                size: 510,\n                ledVisible: false,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                knobStyle: steelseries.KnobStyle.SILVER,\n                pointerType: steelseries.PointerType.TYPE9,\n                lcdDecimals: 0,\n                threshold: 0,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                section: null,\n                area: null,\n                titleString: \"Speed\",\n                unitString: \"%\",\n                lcdVisible: true,\n                useOdometer: true,\n                odometerParams: { digits: 5 },\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var leftGaugeImage = new fabric.Image(document.getElementById(\"gLeft\"), {\n                left: 0,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(leftGaugeImage);\n            _this.miniGaugeLeft = new steelseries.Linear(\"gMiniLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                thresholdVisible: false,\n                lcdVisible: false,\n                niceScale: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeLeftImage = new fabric.Image(document.getElementById(\"gMiniLeft\"), {\n                left: 405,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeLeftImage);\n            _this.miniGaugeRight = new steelseries.Linear(\"gMiniRight\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                lcdVisible: false,\n                niceScale: true,\n                thresholdVisible: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeRightImage = new fabric.Image(document.getElementById(\"gMiniRight\"), {\n                left: 660,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeRightImage);\n        };\n        this.drawRightGauge = function () {\n            _this.rightGauge = new steelseries.RadialBargraph(\"gRight\", {\n                gaugeType: steelseries.GaugeType.TYPE2,\n                minValue: 10,\n                maxValue: 90,\n                size: 510,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                ledVisible: false,\n                niceScale: false,\n                fractionalScaleDecimals: false,\n                useValueGradient: true,\n                section: null,\n                area: null,\n                lcdVisible: false,\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var rightGaugeImage = new fabric.Image(document.getElementById(\"gRight\"), {\n                left: 898,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(rightGaugeImage);\n        };\n        this.drawGauges = function () {\n            _this.drawLeftGauge();\n            _this.drawRightGauge();\n            _this.parkingControl.init(_this.canvas);\n        };\n        this.drawMiddleDisplay = function () {\n            _this.canvas.add(new fabric.Line([400, 59, 1000, 59], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            _this.canvas.add(new fabric.Line([400, 436, 1000, 436], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            var degreesText = new fabric.Text(\"22.5 Â°C\", {\n                fontSize: 28,\n                textAlign: \"center\",\n                left: 890,\n                top: 25,\n                fontFamily: \"Arial\",\n                fill: \"white\"\n            });\n            _this.canvas.add(degreesText);\n        };\n        this.zoomIt = function (factor) {\n            _this.canvas.setHeight(_this.canvas.getHeight() * factor);\n            _this.canvas.setWidth(_this.canvas.getWidth() * factor);\n            if (_this.canvas.backgroundImage) {\n                var bi = _this.canvas.backgroundImage;\n                bi.width = bi.width * factor;\n                bi.height = bi.height * factor;\n            }\n            var objects = _this.canvas.getObjects();\n            for (var i in objects) {\n                var scaleX = objects[i].scaleX;\n                var scaleY = objects[i].scaleY;\n                var left = objects[i].left;\n                var top_1 = objects[i].top;\n                var tempScaleX = scaleX * factor;\n                var tempScaleY = scaleY * factor;\n                var tempLeft = left * factor;\n                var tempTop = top_1 * factor;\n                objects[i].scaleX = tempScaleX;\n                objects[i].scaleY = tempScaleY;\n                objects[i].left = tempLeft;\n                objects[i].top = tempTop;\n                objects[i].setCoords();\n            }\n            _this.canvas.renderAll();\n            _this.canvas.calcOffset();\n        };\n        this.resizeCanvas = function () {\n            var clientWidth = window.innerWidth;\n            _this.zoomFactor = clientWidth / _this.canvas.getWidth();\n            _this.zoomIt(_this.zoomFactor);\n        };\n        if (Dashboard.instance) {\n            throw new Error(\"Error - use Dashboard.getInstance()\");\n        }\n    }\n    Dashboard.getInstance = function () {\n        Dashboard.instance = Dashboard.instance || new Dashboard();\n        return Dashboard.instance;\n    };\n    return Dashboard;\n}());\nvar DashboardClockController = (function () {\n    function DashboardClockController(canvas) {\n        var _this = this;\n        this.hideClock = function () {\n            _this.canvas.remove(_this.clockGaugeImage);\n        };\n        this.showClock = function () {\n            _this.hideClock();\n            new steelseries.Clock(\"gClock\", {\n                gaugeType: steelseries.GaugeType.TYPE4,\n                size: 170,\n                secondPointerVisible: true,\n                backgroundVisible: true,\n                backgroundColor: steelseries.BackgroundColor.BRUSHED_STAINLESS,\n                frameVisible: false,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                minValue: 20,\n                maxValue: 80,\n                value: 45,\n                niceScale: true,\n                pointerType: steelseries.PointerType.TYPE5,\n            });\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.clockGaugeImage = new fabric.Image(document.getElementById(\"gClock\"), {\n                left: 579 * factor,\n                top: 120 * factor,\n                width: 250 * factor,\n                height: 250 * factor\n            });\n            _this.canvas.add(_this.clockGaugeImage);\n            _this.canvas.renderAll();\n        };\n        this.updateTime = function () {\n            var today = new Date();\n            var h = _this.checkTime(today.getHours());\n            var m = _this.checkTime(today.getMinutes());\n            _this.clockText.setText(h + \":\" + m);\n        };\n        this.checkTime = function (i) {\n            if (i < 10) {\n                i = \"0\" + i;\n            }\n            ;\n            return i;\n        };\n        this.canvas = canvas;\n        this.clockText = new fabric.Text(\"21:45\", {\n            fontSize: 28,\n            textAlign: \"center\",\n            left: 420,\n            top: 25,\n            fontFamily: \"Arial\",\n            fill: \"white\"\n        });\n        this.canvas.add(this.clockText);\n        this.updateTime();\n    }\n    return DashboardClockController;\n}());\nvar DashboardIcons;\n(function (DashboardIcons) {\n    DashboardIcons[DashboardIcons[\"SeatBelt\"] = 0] = \"SeatBelt\";\n    DashboardIcons[DashboardIcons[\"Tempomat\"] = 1] = \"Tempomat\";\n    DashboardIcons[DashboardIcons[\"FrontAssist\"] = 2] = \"FrontAssist\";\n    DashboardIcons[DashboardIcons[\"Engine\"] = 3] = \"Engine\";\n    DashboardIcons[DashboardIcons[\"Headlights\"] = 4] = \"Headlights\";\n    DashboardIcons[DashboardIcons[\"LaneAssist\"] = 5] = \"LaneAssist\";\n    DashboardIcons[DashboardIcons[\"ParkingBrake\"] = 6] = \"ParkingBrake\";\n    DashboardIcons[DashboardIcons[\"ParkingSensors\"] = 7] = \"ParkingSensors\";\n    DashboardIcons[DashboardIcons[\"WaterTemperature\"] = 8] = \"WaterTemperature\";\n    DashboardIcons[DashboardIcons[\"TurnSignals\"] = 9] = \"TurnSignals\";\n})(DashboardIcons || (DashboardIcons = {}));\nvar DashboardIconsController = (function () {\n    function DashboardIconsController(canvas) {\n        this.icons = {};\n        this.canvas = canvas;\n    }\n    DashboardIconsController.prototype.showIcon = function (target) {\n        var _this = this;\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            return;\n        }\n        else {\n            this.icons[target] = { id: target, isVisible: true };\n        }\n        var path = null;\n        var left = -1;\n        var top = -1;\n        switch (target) {\n            case DashboardIcons.Engine:\n                path = \"/images/Engine.svg\";\n                left = 675;\n                top = 445;\n                break;\n            case DashboardIcons.FrontAssist:\n                path = \"/images/Frontassist.svg\";\n                left = 1230;\n                top = 300;\n                break;\n            case DashboardIcons.Headlights:\n                path = \"/images/Headlights.svg\";\n                left = 615;\n                top = 10;\n                break;\n            case DashboardIcons.LaneAssist:\n                path = \"/images/Laneassist.svg\";\n                left = 525;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingBrake:\n                path = \"/images/Parkingbrake.svg\";\n                left = 840;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingSensors:\n                path = \"/images/Parkingsensors.svg\";\n                left = 1030;\n                top = 300;\n                break;\n            case DashboardIcons.SeatBelt:\n                path = \"/images/Seatbelt.svg\";\n                left = 900;\n                top = 445;\n                break;\n            case DashboardIcons.Tempomat:\n                path = \"/images/Tempomat.svg\";\n                left = 465;\n                top = 445;\n                break;\n            case DashboardIcons.TurnSignals:\n                path = \"/images/Turnsignal.svg\";\n                left = 675;\n                top = 10;\n                break;\n            case DashboardIcons.WaterTemperature:\n                path = \"/images/Temperature.svg\";\n                left = 960;\n                top = 280;\n                break;\n        }\n        if (path !== null && left !== -1 && top !== -1) {\n            fabric.loadSVGFromURL(path, function (objects) {\n                var factor = Dashboard.getInstance().zoomFactor;\n                var result = new fabric.PathGroup(objects, {\n                    left: left * factor,\n                    top: top * factor\n                });\n                result.scaleX = 0.7 * factor;\n                result.scaleY = 0.7 * factor;\n                _this.canvas.add(result);\n                _this.icons[target] = { id: target, iconPath: result, isVisible: true };\n            });\n        }\n    };\n    DashboardIconsController.prototype.hideIcon = function (target) {\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            icon.isVisible = false;\n            this.canvas.remove(icon.iconPath);\n            icon.iconPath = null;\n        }\n    };\n    DashboardIconsController.prototype.showAllIcons = function () {\n        this.showIcon(DashboardIcons.Engine);\n        this.showIcon(DashboardIcons.FrontAssist);\n        this.showIcon(DashboardIcons.Headlights);\n        this.showIcon(DashboardIcons.LaneAssist);\n        this.showIcon(DashboardIcons.ParkingBrake);\n        this.showIcon(DashboardIcons.ParkingSensors);\n        this.showIcon(DashboardIcons.SeatBelt);\n        this.showIcon(DashboardIcons.Tempomat);\n        this.showIcon(DashboardIcons.TurnSignals);\n        this.showIcon(DashboardIcons.WaterTemperature);\n    };\n    DashboardIconsController.prototype.hideAllIcons = function () {\n        this.hideIcon(DashboardIcons.Engine);\n        this.hideIcon(DashboardIcons.FrontAssist);\n        this.hideIcon(DashboardIcons.Headlights);\n        this.hideIcon(DashboardIcons.LaneAssist);\n        this.hideIcon(DashboardIcons.ParkingBrake);\n        this.hideIcon(DashboardIcons.ParkingSensors);\n        this.hideIcon(DashboardIcons.SeatBelt);\n        this.hideIcon(DashboardIcons.Tempomat);\n        this.hideIcon(DashboardIcons.TurnSignals);\n        this.hideIcon(DashboardIcons.WaterTemperature);\n    };\n    return DashboardIconsController;\n}());\nvar Parking = (function () {\n    function Parking() {\n        var _this = this;\n        this.colorOff = \"lightGray\";\n        this.color1 = \"yellow\";\n        this.color2 = \"orange\";\n        this.color3 = \"orangered\";\n        this.color4 = \"red\";\n        this.colorLeftLine = \"red\";\n        this.colorRightLine = \"green\";\n        this.isOff = true;\n        this.circle1 = null;\n        this.circle2 = null;\n        this.circle3 = null;\n        this.circle4 = null;\n        this.left = null;\n        this.right = null;\n        this.lineLeft = null;\n        this.lineRight = null;\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                _this.circle1.stroke = _this.colorOff;\n                _this.circle2.stroke = _this.colorOff;\n                _this.circle3.stroke = _this.colorOff;\n                _this.circle4.stroke = _this.colorOff;\n                _this.left.stroke = _this.colorOff;\n                _this.right.stroke = _this.colorOff;\n                _this.lineLeft.fill = _this.colorOff;\n                _this.lineRight.fill = _this.colorOff;\n                var dist = msg[\"d\"];\n                if (!_this.isOff) {\n                    _this.miniDisplay.setValue(dist);\n                }\n                if (dist < 50 && dist >= 30) {\n                    _this.circle1.stroke = _this.color1;\n                }\n                if (dist < 30 && dist >= 20) {\n                    _this.circle2.stroke = _this.color2;\n                }\n                if (dist < 20 && dist >= 10) {\n                    _this.circle3.stroke = _this.color3;\n                }\n                if (dist < 10 || msg[\"c\"]) {\n                    _this.circle4.stroke = _this.color4;\n                }\n                if (msg[\"l\"]) {\n                    _this.left.stroke = _this.color4;\n                }\n                if (msg[\"r\"]) {\n                    _this.right.stroke = _this.color4;\n                }\n                if (msg[\"ll\"]) {\n                    _this.lineLeft.fill = _this.colorLeftLine;\n                }\n                if (msg[\"rl\"]) {\n                    _this.lineRight.fill = _this.colorRightLine;\n                }\n                if (msg[\"fa\"]) {\n                    _this.iconsController.showIcon(DashboardIcons.FrontAssist);\n                }\n                else {\n                    _this.iconsController.hideIcon(DashboardIcons.FrontAssist);\n                }\n                _this.canvas.renderAll();\n            }\n        };\n        this.turnOff = function () {\n            _this.isOff = true;\n            _this.update({ \"d\": 10000 });\n            _this.drawMiniDisplay();\n        };\n        this.turnOn = function () {\n            _this.isOff = false;\n            _this.drawMiniDisplay();\n        };\n        this.init = function (canvas) {\n            var startAngle = -2.618;\n            var endAngle = -0.5235;\n            startAngle = -2.35619;\n            endAngle = -0.785398;\n            _this.canvas = canvas;\n            _this.canvas.allowTouchScrolling = false;\n            _this.canvas.setZoom(1);\n            _this.circle1 = new fabric.Circle({\n                radius: 100,\n                left: -10,\n                top: 20,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle2 = new fabric.Circle({\n                radius: 80,\n                left: 10,\n                top: 40,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle3 = new fabric.Circle({\n                radius: 60,\n                left: 30,\n                top: 60,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle4 = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.left = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle - 0.8,\n                endAngle: endAngle - 1.65,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.right = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle + 1.65,\n                endAngle: endAngle + 0.8,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            var body = new fabric.Rect({\n                top: 115,\n                left: 73,\n                width: 50,\n                height: 100,\n                fill: \"gray\",\n                selectable: false\n            });\n            var wleft = new fabric.Rect({\n                top: 180,\n                left: 45,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            var wright = new fabric.Rect({\n                top: 180,\n                left: 126,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            _this.lineLeft = new fabric.Rect({\n                top: 130,\n                left: 80,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            _this.lineRight = new fabric.Rect({\n                top: 130,\n                left: 106,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            var parkingControl = new fabric.Group([\n                _this.circle1, _this.circle2, _this.circle3, _this.circle4, _this.left, _this.right,\n                body, wleft, wright, _this.lineLeft, _this.lineRight\n            ], {\n                left: 1078,\n                top: 140,\n                width: 150,\n                scaleX: 1,\n                scaleY: 1,\n                lockScalingX: true,\n                lockScalingY: true,\n                lockScalingFlip: true,\n                hasBorders: false,\n                hasControls: false\n            });\n            _this.canvas.add(parkingControl);\n            _this.drawMiniDisplay();\n        };\n        this.drawMiniDisplay = function () {\n            if (_this.miniDisplayImage != null) {\n                _this.canvas.remove(_this.miniDisplayImage);\n            }\n            if (_this.isOff) {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    valuesNumeric: false,\n                    value: \"off \",\n                    lcdDecimals: 0\n                });\n            }\n            else {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    unitString: \"cm\",\n                    lcdDecimals: 0,\n                    unitStringVisible: true\n                });\n            }\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.miniDisplayImage = new fabric.Image(document.getElementById(\"gMini\"), {\n                left: 1073 * factor,\n                top: 360 * factor,\n                width: 160 * factor,\n                height: 60 * factor\n            });\n            _this.canvas.add(_this.miniDisplayImage);\n        };\n    }\n    return Parking;\n}());\n;\nvar RequestsHelper = (function () {\n    function RequestsHelper() {\n    }\n    RequestsHelper.prototype.put = function (command, callbackSuccess, callbackError) {\n        if (callbackSuccess === void 0) { callbackSuccess = null; }\n        if (callbackError === void 0) { callbackError = null; }\n        $.ajax({\n            url: Settings.Current.getBaseAPIUrl() + command,\n            type: \"PUT\",\n            success: function (result) {\n                console.log(command);\n                if (callbackSuccess != null) {\n                    callbackSuccess(result);\n                }\n            },\n            error: function (result) {\n                console.log(result + command);\n                if (callbackError != null) {\n                    callbackError(result);\n                }\n            }\n        });\n    };\n    RequestsHelper.Current = new RequestsHelper();\n    return RequestsHelper;\n}());\nvar RobotControls = (function () {\n    function RobotControls() {\n        var _this = this;\n        this.joystickLeft = null;\n        this.accButton = null;\n        this.brakeButton = null;\n        this.currentSpeed = 40;\n        this.showDirectionJoystick = function () {\n            if (_this.joystickLeft != null)\n                return;\n            var currentDirectionAngle = 0;\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n            _this.joystickLeft = nipplejs.create({\n                maxNumberOfNipples: 1,\n                zone: document.getElementById(\"jLeft\"),\n                mode: \"dynamic\",\n                size: 120,\n                position: { left: \"50%\", top: \"50%\" },\n                color: \"green\"\n            }).on(\"start end\", function (evt, data) {\n                if (evt.type === \"end\") {\n                    RequestsHelper.Current.put(\"motor/stop\");\n                    Dashboard.getInstance().stop();\n                }\n            }).on(\"move\", function (evt, data) {\n                var dist = data.distance;\n                if (dist > 10) {\n                    var angle = Math.floor(data.angle.degree / 10) * 10;\n                    if (angle !== currentDirectionAngle) {\n                        RequestsHelper.Current.put(\"motor/move/\" + angle);\n                        currentDirectionAngle = angle;\n                        Dashboard.getInstance().move();\n                        if ((angle > 100 && angle < 260) || angle < 80 || angle > 280) {\n                            Dashboard.getInstance().showIcon(DashboardIcons.TurnSignals);\n                        }\n                        else {\n                            Dashboard.getInstance().hideIcon(DashboardIcons.TurnSignals);\n                        }\n                    }\n                }\n            });\n        };\n    }\n    RobotControls.prototype.init = function () {\n        var _this = this;\n        this.accButton = $(\"#accButton\");\n        this.accButton.click(function () {\n            _this.modifySpeed(+10);\n        });\n        this.brakeButton = $(\"#brakeButton\");\n        this.brakeButton.click(function () {\n            _this.modifySpeed(-10);\n        });\n    };\n    RobotControls.prototype.show = function () {\n        this.showDirectionJoystick();\n        this.accButton.show();\n        this.brakeButton.show();\n    };\n    RobotControls.prototype.hide = function () {\n        if (this.joystickLeft != null) {\n            this.joystickLeft.destroy();\n            this.joystickLeft = null;\n        }\n        if (this.accButton != null) {\n            this.accButton.hide();\n        }\n        if (this.brakeButton != null) {\n            this.brakeButton.hide();\n        }\n    };\n    RobotControls.prototype.modifySpeed = function (speed) {\n        var _this = this;\n        RequestsHelper.Current.put(\"motor/speed/\" + (this.currentSpeed + speed), function (data) {\n            _this.currentSpeed = data[\"speed\"];\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n        });\n    };\n    return RobotControls;\n}());\nvar Settings = (function () {\n    function Settings() {\n        var _this = this;\n        this.robotIpCookieName = \"RobotIP\";\n        this.robotIP = null;\n        this.show = function () {\n            BootstrapDialog.show({\n                title: \"Settings\",\n                message: $(\"<div></div>\").load(\"settings.html\"),\n                closable: true,\n                closeByBackdrop: true,\n                closeByKeyboard: true,\n                data: {},\n                onshow: function (dialogRef) {\n                },\n                onshown: function (dialogRef) {\n                    $(\"#robotIP\").val(_this.getRobotIp());\n                    $(\"#shutdownButton\").click(_this.executeShutdown);\n                    $(\"#rebootButton\").click(_this.executeReboot);\n                    $(\"#stopButton\").click(_this.executeStop);\n                },\n                buttons: [\n                    {\n                        label: \"Close\",\n                        action: function (dialogItself) {\n                            dialogItself.close();\n                        }\n                    }\n                ],\n                onhide: function (dialogRef) {\n                    _this.robotIP = $(\"#robotIP\").val();\n                    _this.storeRobotIp();\n                }\n            });\n        };\n        this.getBaseServerUrl = function () {\n            return \"http://\" + _this.getRobotIp();\n        };\n        this.getBaseAPIUrl = function () {\n            return \"http://\" + _this.getRobotIp() + \":80/ropi/api/v1.0/\";\n        };\n        this.getCameraUrl = function () {\n            return _this.getBaseServerUrl() + \":8080/stream/video.mjpeg\";\n        };\n    }\n    Settings.prototype.getRobotIp = function () {\n        if (!this.checkRobotIp(this.robotIP)) {\n            this.robotIP = Cookies.get(this.robotIpCookieName);\n            if (!this.checkRobotIp(this.robotIP)) {\n                this.robotIP = window.location.hostname;\n                if (!this.checkRobotIp(this.robotIP)) {\n                    this.robotIP = \"raspberrypi\";\n                }\n            }\n        }\n        return this.robotIP;\n    };\n    Settings.prototype.storeRobotIp = function () {\n        Cookies.set(this.robotIpCookieName, this.robotIP);\n    };\n    Settings.prototype.checkRobotIp = function (ip) {\n        return ip != null && ip !== \"\" && ip !== \"undefined\";\n    };\n    Settings.prototype.executeShutdown = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to shutdown the Robot.\\r\\n You won't be able to reach it anymore (power on required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, shutdown!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/shutdown\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeReboot = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to reboot the Robot.\\r\\n Please wait few minutes then reconnect to the Robot.\",\n            type: BootstrapDialog.TYPE_WARNING,\n            btnOKLabel: \"Yes, reboot!\",\n            btnOKClass: \"btn-warning\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/reboot\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeStop = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to stop the server running on the Robot.\\r\\n You won't be able to reach it anymore (hard reset required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, stop it!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"quit\");\n                }\n            }\n        });\n    };\n    Settings.Current = new Settings();\n    return Settings;\n}());\n\n},{}]},{},[1])(1)\n});\n\n"],"sourceRoot":"/source/"}