{"version":3,"sources":["node_modules/browser-pack/_prelude.js","source/js/application.min.js","application.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","application","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"$","document","ready","Application","run","CameraControl","_this","socketio","robotIpEntry","cameraButton","connectButton","cameraControlsButton","cameraControlsOff","cameraControlsJoystick","cameraControlsSteppedJoystick","robotControls","RobotControls","cameraControls","CameraControls","init","bootstrapToggle","change","processToggleCamera","processRobotToggle","click","selectMode","FollowMeJoystick","SteppedJoystick","disableControlsButton","settingsButton","Settings","Current","show","Dashboard","getInstance","getToggleStatus","toggle","prop","getIsConnected","getIsCameraActive","getIsControlsActive","hide","enableControlsButton","connect","io","getBaseServerUrl","forceNew","on","msg","text","title","robotType","hideIcon","DashboardIcons","Engine","parkingControl","update","showIcon","emit","disconnect","processToggleControls","startCamera","stopCamera","startEngine","stopEngine","joystickRight","currentTilt","currentPan","step","isBusy","currentCameraControls","sendCameraCommand","command","console","log","RequestsHelper","put","processResult","data","pan","tilt","adjustTilt","offset","adjustPan","prototype","cameraControl","currentDistance","currentInterval","currentDirection","currentPanPercent","currentTiltPercent","joystickSize","distanceMax","Math","floor","centerX","centerY","steppedStart","nipplejs","create","maxNumberOfNipples","zone","getElementById","size","mode","position","left","top","color","evt","type","x","y","clearInterval","direction","panPercent","tiltPercent","angle","destroy","Parking","canvas","fabric","StaticCanvas","zoomFactor","originalWidth","originalHeight","isCameraVisible","cruiseControlSpeed","isMoving","setBackgroundColor","setHeight","setWidth","clockController","DashboardClockController","iconsController","DashboardIconsController","drawMiddleDisplay","drawCameraAndGauges","setInterval","updateTime","cameraInterval","renderAll","onresize","resizeCanvas","tempInterval","callback","showAllIcons","leftGauge","setValue","rightGauge","miniGaugeLeft","miniGaugeRight","setTimeout","hideAllIcons","turnOn","ParkingSensors","Headlights","ParkingBrake","SeatBelt","turnOff","setValueAnimated","setCruiseControlSpeed","speed","needMove","setThreshold","move","Tempomat","stop","TurnSignals","icon","img","onload","hideClock","cameraImage","setElement","width","height","onerror","showClock","src","getCameraUrl","memPercent","cpuPercent","cpuTemp","Image","fromURL","image","add","drawGauges","drawLeftGauge","steelseries","Radial","gaugeType","GaugeType","TYPE3","minValue","maxValue","ledVisible","foregroundType","ForegroundType","frameDesign","FrameDesign","TILTED_BLACK","knobStyle","KnobStyle","SILVER","pointerType","PointerType","TYPE9","lcdDecimals","threshold","tickLabelOrientation","TickLabelOrientation","HORIZONTAL","section","area","titleString","unitString","lcdVisible","useOdometer","odometerParams","digits","backgroundColor","BackgroundColor","CARBON","leftGaugeImage","Linear","TYPE1","backgroundVisible","frameVisible","thresholdVisible","niceScale","foregroundVisible","miniGaugeLeftImage","miniGaugeRightImage","drawRightGauge","RadialBargraph","TYPE2","fractionalScaleDecimals","useValueGradient","rightGaugeImage","Line","stroke","strokeWidth","degreesText","Text","fontSize","textAlign","fontFamily","fill","zoomIt","factor","getHeight","getWidth","backgroundImage","bi","objects","getObjects","scaleX","scaleY","top_1","tempScaleX","tempScaleY","tempLeft","tempTop","setCoords","calcOffset","clientWidth","innerWidth","instance","remove","clockGaugeImage","Clock","TYPE4","secondPointerVisible","BRUSHED_STAINLESS","value","TYPE5","today","Date","h","checkTime","getHours","m","getMinutes","clockText","setText","icons","target","undefined","isVisible","id","path","FrontAssist","LaneAssist","WaterTemperature","loadSVGFromURL","result","PathGroup","iconPath","colorOff","color1","color2","color3","color4","colorLeftLine","colorRightLine","isOff","circle1","circle2","circle3","circle4","right","lineLeft","lineRight","dist","miniDisplay","d","drawMiniDisplay","startAngle","endAngle","allowTouchScrolling","setZoom","Circle","radius","selectable","body","Rect","wleft","wright","Group","lockScalingX","lockScalingY","lockScalingFlip","hasBorders","hasControls","miniDisplayImage","DisplaySingle","valuesNumeric","unitStringVisible","callbackSuccess","callbackError","ajax","url","getBaseAPIUrl","success","error","joystickLeft","accButton","brakeButton","currentSpeed","showDirectionJoystick","currentDirectionAngle","distance","degree","modifySpeed","robotIpCookieName","robotIP","BootstrapDialog","message","load","closable","closeByBackdrop","closeByKeyboard","onshow","dialogRef","onshown","val","getRobotIp","executeShutdown","executeReboot","executeStop","buttons","label","action","dialogItself","close","onhide","storeRobotIp","checkRobotIp","Cookies","get","location","hostname","set","ip","confirm","TYPE_DANGER","btnOKLabel","btnOKClass","TYPE_WARNING"],"mappings":"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","file":"application.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","$(document).ready(function () {\n    new Application().run();\n});\nvar Application = (function () {\n    function Application() {\n        var _this = this;\n        this.socketio = null;\n        this.robotIpEntry = null;\n        this.cameraButton = null;\n        this.connectButton = null;\n        this.cameraControlsButton = null;\n        this.cameraControlsOff = null;\n        this.cameraControlsJoystick = null;\n        this.cameraControlsSteppedJoystick = null;\n        this.robotControls = new RobotControls();\n        this.cameraControls = new CameraControls();\n        this.run = function () {\n            _this.robotControls.init();\n            _this.cameraControls.init();\n            _this.cameraButton = $(\"#cameraButton\");\n            _this.cameraButton.bootstrapToggle();\n            _this.cameraButton.change(function () {\n                _this.processToggleCamera();\n            });\n            _this.connectButton = $(\"#connectButton\");\n            _this.connectButton.bootstrapToggle();\n            _this.connectButton.change(function () {\n                _this.processRobotToggle();\n            });\n            _this.cameraControlsButton = $(\"#controlsButtonOptions\");\n            _this.cameraControlsJoystick = $(\"#controlsJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.FollowMeJoystick);\n            });\n            _this.cameraControlsSteppedJoystick = $(\"#controlsSteppedJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.SteppedJoystick);\n            });\n            _this.disableControlsButton();\n            var settingsButton = $(\"#settingsButton\");\n            settingsButton.click(function () {\n                Settings.Current.show();\n            });\n            Dashboard.getInstance().show();\n        };\n        this.getToggleStatus = function (toggle) { return (toggle != null && toggle.prop(\"checked\")); };\n        this.getIsConnected = function () { return _this.getToggleStatus(_this.connectButton); };\n        this.getIsCameraActive = function () { return _this.getToggleStatus(_this.cameraButton); };\n        this.getIsControlsActive = function () { return true; };\n        this.disableControlsButton = function () {\n            _this.cameraControls.hide();\n            _this.cameraControlsButton.prop(\"disabled\", true);\n        };\n        this.enableControlsButton = function () {\n            _this.cameraControlsButton.prop(\"disabled\", false);\n            _this.cameraControls.show();\n        };\n        this.connect = function () {\n            _this.socketio = io.connect(Settings.Current.getBaseServerUrl() + \":80/\", { 'forceNew': true });\n            _this.socketio.on(\"connected\", function (msg) {\n                $(\"#badge\").text(msg.title + ' ' + msg.robotType);\n                Dashboard.getInstance().hideIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"disconnected\", function (msg) {\n                $(\"#badge\").text('offline');\n                _this.connectButton.bootstrapToggle(\"off\");\n                _this.cameraButton.bootstrapToggle(\"off\");\n            });\n            _this.socketio.on(\"parking\", function (msg) {\n                Dashboard.getInstance().parkingControl.update(msg);\n            });\n            _this.socketio.on(\"sysinfo\", function (msg) {\n                Dashboard.getInstance().update(msg);\n            });\n            _this.socketio.on(\"error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"reconnect_error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.emit(\"connect\");\n        };\n        this.disconnect = function () {\n            if (_this.socketio !== null) {\n                _this.socketio.disconnect();\n            }\n        };\n        this.processToggleControls = function () {\n            if (!_this.getIsCameraActive())\n                return;\n        };\n        this.processToggleCamera = function () {\n            if (_this.getIsCameraActive()) {\n                Dashboard.getInstance().startCamera();\n                _this.enableControlsButton();\n            }\n            else {\n                Dashboard.getInstance().stopCamera();\n                _this.cameraControls.hide();\n                _this.disableControlsButton();\n            }\n        };\n        this.processRobotToggle = function () {\n            if (_this.getIsConnected()) {\n                Dashboard.getInstance().startEngine(function () {\n                    _this.connect();\n                    _this.robotControls.show();\n                    if (!_this.getIsCameraActive()) {\n                        _this.cameraButton.bootstrapToggle(\"toggle\");\n                    }\n                    _this.enableControlsButton();\n                });\n            }\n            else {\n                Dashboard.getInstance().stopEngine(function () {\n                    $(\"#badge\").text('offline');\n                    _this.robotControls.hide();\n                    _this.disconnect();\n                    if (!_this.getIsCameraActive()) {\n                        _this.disableControlsButton();\n                    }\n                });\n            }\n        };\n    }\n    return Application;\n}());\nvar CameraControl;\n(function (CameraControl) {\n    CameraControl[CameraControl[\"SteppedJoystick\"] = 0] = \"SteppedJoystick\";\n    CameraControl[CameraControl[\"FollowMeJoystick\"] = 1] = \"FollowMeJoystick\";\n})(CameraControl || (CameraControl = {}));\nvar CameraControls = (function () {\n    function CameraControls() {\n        var _this = this;\n        this.joystickRight = null;\n        this.currentTilt = 95;\n        this.currentPan = 90;\n        this.step = 10;\n        this.isBusy = false;\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        this.sendCameraCommand = function (command) {\n            if (_this.isBusy && command !== \"center\") {\n                console.log(\"Skipped request...\");\n                return;\n            }\n            _this.isBusy = true;\n            RequestsHelper.Current.put(\"servos/\" + command, _this.processResult, function () { return _this.isBusy = false; });\n        };\n        this.processResult = function (data) {\n            var pan = data[\"pan\"];\n            var tilt = data[\"tilt\"];\n            if (pan != null && pan !== -1) {\n                _this.currentPan = pan;\n            }\n            if (tilt != null && tilt !== -1) {\n                _this.currentTilt = data[\"tilt\"];\n            }\n            _this.isBusy = false;\n        };\n        this.adjustTilt = function (offset) { return (_this.currentTilt + offset); };\n        this.adjustPan = function (offset) { return (_this.currentPan + offset); };\n    }\n    CameraControls.prototype.init = function () {\n    };\n    CameraControls.prototype.selectMode = function (cameraControl) {\n        this.currentCameraControls = cameraControl;\n    };\n    CameraControls.prototype.show = function () {\n        var _this = this;\n        var currentDirection = null;\n        var currentDistance;\n        var currentPanPercent = 0;\n        var currentTiltPercent = 0;\n        var joystickSize = 120;\n        var distanceMax = Math.floor(joystickSize / 2);\n        var centerX = 0;\n        var centerY = 0;\n        var currentInterval;\n        var steppedStart = false;\n        this.hide();\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        if (this.joystickRight != null)\n            return;\n        this.joystickRight = nipplejs.create({\n            maxNumberOfNipples: 1,\n            zone: document.getElementById(\"jRight\"),\n            size: joystickSize,\n            mode: \"dynamic\",\n            position: { left: \"50%\", top: \"50%\" },\n            color: \"blue\"\n        }).on(\"start end\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (evt.type === \"start\") {\n                    centerX = data.position.x;\n                    centerY = data.position.y;\n                    console.log(\"centerX:\" + centerX + \"  centerY:\" + centerY);\n                }\n                else {\n                    centerX = 0;\n                    centerY = 0;\n                    _this.sendCameraCommand(\"center\");\n                }\n                currentDirection = null;\n                currentDistance = 0;\n            }\n            else if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                clearInterval(currentInterval);\n                if (evt.type === \"start\") {\n                    steppedStart = true;\n                }\n                else {\n                    _this.sendCameraCommand(\"move/stop\");\n                    if (steppedStart) {\n                        steppedStart = false;\n                        _this.sendCameraCommand(\"center\");\n                    }\n                }\n            }\n        }).on(\"move\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (data == null || data.direction === null || data.position === null)\n                    return;\n                var panPercent = -Math.floor(((data.position.x - centerX) / distanceMax) * 100);\n                var tiltPercent = Math.floor(((data.position.y - centerY) / distanceMax) * 100);\n                if (panPercent > 100 || panPercent < -100 || tiltPercent > 100 || tiltPercent < -100) {\n                    return;\n                }\n                if (panPercent % 2 === 0 || tiltPercent % 2 === 0) {\n                    if (currentPanPercent !== panPercent || currentTiltPercent !== tiltPercent) {\n                        currentPanPercent = panPercent;\n                        currentTiltPercent = tiltPercent;\n                        _this.sendCameraCommand(\"percent/\" + panPercent + \"/\" + tiltPercent);\n                    }\n                }\n            }\n        }).on(\"dir\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                steppedStart = false;\n                var direction = data.direction.angle;\n                console.log(direction);\n                if (currentDirection === direction) {\n                    return;\n                }\n                currentDirection = direction;\n                _this.sendCameraCommand(\"move/\" + currentDirection);\n            }\n        });\n    };\n    CameraControls.prototype.hide = function () {\n        if (this.joystickRight != null) {\n            this.joystickRight.destroy();\n            this.joystickRight = null;\n        }\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n    };\n    return CameraControls;\n}());\nvar Dashboard = (function () {\n    function Dashboard() {\n        var _this = this;\n        this.parkingControl = new Parking();\n        this.canvas = new fabric.StaticCanvas(\"dashboard\");\n        this.zoomFactor = 1;\n        this.originalWidth = 1408;\n        this.originalHeight = 513;\n        this.isCameraVisible = false;\n        this.cruiseControlSpeed = 0;\n        this.isMoving = false;\n        this.show = function () {\n            _this.canvas.setBackgroundColor(\"black\", function () { });\n            _this.canvas.setHeight(_this.originalHeight);\n            _this.canvas.setWidth(_this.originalWidth);\n            _this.clockController = new DashboardClockController(_this.canvas);\n            _this.iconsController = new DashboardIconsController(_this.canvas);\n            _this.parkingControl.iconsController = _this.iconsController;\n            _this.drawMiddleDisplay();\n            _this.drawCameraAndGauges();\n            setInterval(function () {\n                _this.clockController.updateTime();\n                if (_this.cameraInterval == null) {\n                    _this.canvas.renderAll();\n                }\n            }, 1000);\n            window.onresize = _this.resizeCanvas;\n            _this.tempInterval = setInterval(function () {\n                clearInterval(_this.tempInterval);\n                _this.resizeCanvas();\n            }, 500);\n        };\n        this.startEngine = function (callback) {\n            _this.iconsController.showAllIcons();\n            _this.leftGauge.setValue(100);\n            _this.rightGauge.setValue(90);\n            _this.miniGaugeLeft.setValue(100);\n            _this.miniGaugeRight.setValue(100);\n            setTimeout(function () {\n                _this.iconsController.hideAllIcons();\n                _this.leftGauge.setValue(0);\n                _this.rightGauge.setValue(0);\n                _this.miniGaugeLeft.setValue(0);\n                _this.miniGaugeRight.setValue(0);\n                _this.parkingControl.turnOn();\n                _this.showIcon(DashboardIcons.ParkingSensors);\n                _this.showIcon(DashboardIcons.Headlights);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.showIcon(DashboardIcons.SeatBelt);\n                if (callback != null) {\n                    callback();\n                }\n            }, 1500);\n        };\n        this.stopEngine = function (callback) {\n            _this.parkingControl.turnOff();\n            _this.miniGaugeLeft.setValue(0);\n            _this.miniGaugeRight.setValue(0);\n            _this.rightGauge.setValueAnimated(0);\n            _this.iconsController.hideAllIcons();\n            if (callback != null) {\n                callback();\n            }\n        };\n        this.setCruiseControlSpeed = function (speed) {\n            if (_this.leftGauge != null) {\n                var needMove = false;\n                if (_this.cruiseControlSpeed !== speed && _this.isMoving) {\n                    needMove = true;\n                }\n                _this.cruiseControlSpeed = speed;\n                _this.leftGauge.setThreshold(_this.cruiseControlSpeed);\n                if (needMove) {\n                    _this.move();\n                }\n            }\n            if (_this.cruiseControlSpeed === 0) {\n                _this.hideIcon(DashboardIcons.Tempomat);\n            }\n            else {\n                _this.showIcon(DashboardIcons.Tempomat);\n            }\n        };\n        this.move = function () {\n            if (_this.leftGauge != null && _this.cruiseControlSpeed != null && !_this.isMoving) {\n                _this.hideIcon(DashboardIcons.ParkingBrake);\n                _this.isMoving = true;\n                _this.leftGauge.setValueAnimated(_this.cruiseControlSpeed);\n            }\n        };\n        this.stop = function () {\n            if (_this.leftGauge != null) {\n                _this.isMoving = false;\n                _this.leftGauge.setValueAnimated(0);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.hideIcon(DashboardIcons.TurnSignals);\n            }\n        };\n        this.showIcon = function (icon) {\n            _this.iconsController.showIcon(icon);\n        };\n        this.hideIcon = function (icon) {\n            _this.iconsController.hideIcon(icon);\n        };\n        this.startCamera = function () {\n            var img = document.getElementById(\"camera\");\n            img.onload = function () {\n                _this.clockController.hideClock();\n                _this.cameraImage.setElement(img);\n                _this.cameraImage.width = 500;\n                _this.cameraImage.height = 375;\n            };\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = Settings.Current.getCameraUrl();\n            _this.cameraInterval = setInterval(function () {\n                _this.canvas.renderAll();\n            }, 250);\n        };\n        this.stopCamera = function () {\n            if (_this.cameraInterval != null) {\n                clearInterval(_this.cameraInterval);\n                _this.cameraInterval = null;\n            }\n            var img = document.getElementById(\"camera\");\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = \"http://\";\n        };\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                var memPercent = msg[\"mp\"];\n                var cpuPercent = msg[\"cp\"];\n                var cpuTemp = msg[\"ct\"];\n                _this.rightGauge.setValueAnimated(cpuTemp);\n                _this.miniGaugeLeft.setValue(cpuPercent);\n                _this.miniGaugeRight.setValue(memPercent);\n            }\n        };\n        this.drawCameraAndGauges = function () {\n            fabric.Image.fromURL(\"http://\", function (image) {\n                _this.cameraImage = image;\n                var ar = image.height / image.width;\n                image.left = 455;\n                image.top = 60;\n                _this.canvas.add(image);\n                _this.drawGauges();\n            });\n            _this.clockController.showClock();\n        };\n        this.drawLeftGauge = function () {\n            _this.leftGauge = new steelseries.Radial(\"gLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE3,\n                minValue: 0,\n                maxValue: 100,\n                size: 510,\n                ledVisible: false,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                knobStyle: steelseries.KnobStyle.SILVER,\n                pointerType: steelseries.PointerType.TYPE9,\n                lcdDecimals: 0,\n                threshold: 0,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                section: null,\n                area: null,\n                titleString: \"Speed\",\n                unitString: \"%\",\n                lcdVisible: true,\n                useOdometer: true,\n                odometerParams: { digits: 5 },\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var leftGaugeImage = new fabric.Image(document.getElementById(\"gLeft\"), {\n                left: 0,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(leftGaugeImage);\n            _this.miniGaugeLeft = new steelseries.Linear(\"gMiniLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                thresholdVisible: false,\n                lcdVisible: false,\n                niceScale: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeLeftImage = new fabric.Image(document.getElementById(\"gMiniLeft\"), {\n                left: 405,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeLeftImage);\n            _this.miniGaugeRight = new steelseries.Linear(\"gMiniRight\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                lcdVisible: false,\n                niceScale: true,\n                thresholdVisible: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeRightImage = new fabric.Image(document.getElementById(\"gMiniRight\"), {\n                left: 660,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeRightImage);\n        };\n        this.drawRightGauge = function () {\n            _this.rightGauge = new steelseries.RadialBargraph(\"gRight\", {\n                gaugeType: steelseries.GaugeType.TYPE2,\n                minValue: 10,\n                maxValue: 90,\n                size: 510,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                ledVisible: false,\n                niceScale: false,\n                fractionalScaleDecimals: false,\n                useValueGradient: true,\n                section: null,\n                area: null,\n                lcdVisible: false,\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var rightGaugeImage = new fabric.Image(document.getElementById(\"gRight\"), {\n                left: 898,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(rightGaugeImage);\n        };\n        this.drawGauges = function () {\n            _this.drawLeftGauge();\n            _this.drawRightGauge();\n            _this.parkingControl.init(_this.canvas);\n        };\n        this.drawMiddleDisplay = function () {\n            _this.canvas.add(new fabric.Line([400, 59, 1000, 59], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            _this.canvas.add(new fabric.Line([400, 436, 1000, 436], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            var degreesText = new fabric.Text(\"22.5 °C\", {\n                fontSize: 28,\n                textAlign: \"center\",\n                left: 890,\n                top: 25,\n                fontFamily: \"Arial\",\n                fill: \"white\"\n            });\n            _this.canvas.add(degreesText);\n        };\n        this.zoomIt = function (factor) {\n            _this.canvas.setHeight(_this.canvas.getHeight() * factor);\n            _this.canvas.setWidth(_this.canvas.getWidth() * factor);\n            if (_this.canvas.backgroundImage) {\n                var bi = _this.canvas.backgroundImage;\n                bi.width = bi.width * factor;\n                bi.height = bi.height * factor;\n            }\n            var objects = _this.canvas.getObjects();\n            for (var i in objects) {\n                var scaleX = objects[i].scaleX;\n                var scaleY = objects[i].scaleY;\n                var left = objects[i].left;\n                var top_1 = objects[i].top;\n                var tempScaleX = scaleX * factor;\n                var tempScaleY = scaleY * factor;\n                var tempLeft = left * factor;\n                var tempTop = top_1 * factor;\n                objects[i].scaleX = tempScaleX;\n                objects[i].scaleY = tempScaleY;\n                objects[i].left = tempLeft;\n                objects[i].top = tempTop;\n                objects[i].setCoords();\n            }\n            _this.canvas.renderAll();\n            _this.canvas.calcOffset();\n        };\n        this.resizeCanvas = function () {\n            var clientWidth = window.innerWidth;\n            _this.zoomFactor = clientWidth / _this.canvas.getWidth();\n            _this.zoomIt(_this.zoomFactor);\n        };\n        if (Dashboard.instance) {\n            throw new Error(\"Error - use Dashboard.getInstance()\");\n        }\n    }\n    Dashboard.getInstance = function () {\n        Dashboard.instance = Dashboard.instance || new Dashboard();\n        return Dashboard.instance;\n    };\n    return Dashboard;\n}());\nvar DashboardClockController = (function () {\n    function DashboardClockController(canvas) {\n        var _this = this;\n        this.hideClock = function () {\n            _this.canvas.remove(_this.clockGaugeImage);\n        };\n        this.showClock = function () {\n            _this.hideClock();\n            new steelseries.Clock(\"gClock\", {\n                gaugeType: steelseries.GaugeType.TYPE4,\n                size: 170,\n                secondPointerVisible: true,\n                backgroundVisible: true,\n                backgroundColor: steelseries.BackgroundColor.BRUSHED_STAINLESS,\n                frameVisible: false,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                minValue: 20,\n                maxValue: 80,\n                value: 45,\n                niceScale: true,\n                pointerType: steelseries.PointerType.TYPE5,\n            });\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.clockGaugeImage = new fabric.Image(document.getElementById(\"gClock\"), {\n                left: 579 * factor,\n                top: 120 * factor,\n                width: 250 * factor,\n                height: 250 * factor\n            });\n            _this.canvas.add(_this.clockGaugeImage);\n            _this.canvas.renderAll();\n        };\n        this.updateTime = function () {\n            var today = new Date();\n            var h = _this.checkTime(today.getHours());\n            var m = _this.checkTime(today.getMinutes());\n            _this.clockText.setText(h + \":\" + m);\n        };\n        this.checkTime = function (i) {\n            if (i < 10) {\n                i = \"0\" + i;\n            }\n            ;\n            return i;\n        };\n        this.canvas = canvas;\n        this.clockText = new fabric.Text(\"21:45\", {\n            fontSize: 28,\n            textAlign: \"center\",\n            left: 420,\n            top: 25,\n            fontFamily: \"Arial\",\n            fill: \"white\"\n        });\n        this.canvas.add(this.clockText);\n        this.updateTime();\n    }\n    return DashboardClockController;\n}());\nvar DashboardIcons;\n(function (DashboardIcons) {\n    DashboardIcons[DashboardIcons[\"SeatBelt\"] = 0] = \"SeatBelt\";\n    DashboardIcons[DashboardIcons[\"Tempomat\"] = 1] = \"Tempomat\";\n    DashboardIcons[DashboardIcons[\"FrontAssist\"] = 2] = \"FrontAssist\";\n    DashboardIcons[DashboardIcons[\"Engine\"] = 3] = \"Engine\";\n    DashboardIcons[DashboardIcons[\"Headlights\"] = 4] = \"Headlights\";\n    DashboardIcons[DashboardIcons[\"LaneAssist\"] = 5] = \"LaneAssist\";\n    DashboardIcons[DashboardIcons[\"ParkingBrake\"] = 6] = \"ParkingBrake\";\n    DashboardIcons[DashboardIcons[\"ParkingSensors\"] = 7] = \"ParkingSensors\";\n    DashboardIcons[DashboardIcons[\"WaterTemperature\"] = 8] = \"WaterTemperature\";\n    DashboardIcons[DashboardIcons[\"TurnSignals\"] = 9] = \"TurnSignals\";\n})(DashboardIcons || (DashboardIcons = {}));\nvar DashboardIconsController = (function () {\n    function DashboardIconsController(canvas) {\n        this.icons = {};\n        this.canvas = canvas;\n    }\n    DashboardIconsController.prototype.showIcon = function (target) {\n        var _this = this;\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            return;\n        }\n        else {\n            this.icons[target] = { id: target, isVisible: true };\n        }\n        var path = null;\n        var left = -1;\n        var top = -1;\n        switch (target) {\n            case DashboardIcons.Engine:\n                path = \"/images/Engine.svg\";\n                left = 675;\n                top = 445;\n                break;\n            case DashboardIcons.FrontAssist:\n                path = \"/images/Frontassist.svg\";\n                left = 1230;\n                top = 300;\n                break;\n            case DashboardIcons.Headlights:\n                path = \"/images/Headlights.svg\";\n                left = 615;\n                top = 10;\n                break;\n            case DashboardIcons.LaneAssist:\n                path = \"/images/Laneassist.svg\";\n                left = 525;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingBrake:\n                path = \"/images/Parkingbrake.svg\";\n                left = 840;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingSensors:\n                path = \"/images/Parkingsensors.svg\";\n                left = 1030;\n                top = 300;\n                break;\n            case DashboardIcons.SeatBelt:\n                path = \"/images/Seatbelt.svg\";\n                left = 900;\n                top = 445;\n                break;\n            case DashboardIcons.Tempomat:\n                path = \"/images/Tempomat.svg\";\n                left = 465;\n                top = 445;\n                break;\n            case DashboardIcons.TurnSignals:\n                path = \"/images/Turnsignal.svg\";\n                left = 675;\n                top = 10;\n                break;\n            case DashboardIcons.WaterTemperature:\n                path = \"/images/Temperature.svg\";\n                left = 960;\n                top = 280;\n                break;\n        }\n        if (path !== null && left !== -1 && top !== -1) {\n            fabric.loadSVGFromURL(path, function (objects) {\n                var factor = Dashboard.getInstance().zoomFactor;\n                var result = new fabric.PathGroup(objects, {\n                    left: left * factor,\n                    top: top * factor\n                });\n                result.scaleX = 0.7 * factor;\n                result.scaleY = 0.7 * factor;\n                _this.canvas.add(result);\n                _this.icons[target] = { id: target, iconPath: result, isVisible: true };\n            });\n        }\n    };\n    DashboardIconsController.prototype.hideIcon = function (target) {\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            icon.isVisible = false;\n            this.canvas.remove(icon.iconPath);\n            icon.iconPath = null;\n        }\n    };\n    DashboardIconsController.prototype.showAllIcons = function () {\n        this.showIcon(DashboardIcons.Engine);\n        this.showIcon(DashboardIcons.FrontAssist);\n        this.showIcon(DashboardIcons.Headlights);\n        this.showIcon(DashboardIcons.LaneAssist);\n        this.showIcon(DashboardIcons.ParkingBrake);\n        this.showIcon(DashboardIcons.ParkingSensors);\n        this.showIcon(DashboardIcons.SeatBelt);\n        this.showIcon(DashboardIcons.Tempomat);\n        this.showIcon(DashboardIcons.TurnSignals);\n        this.showIcon(DashboardIcons.WaterTemperature);\n    };\n    DashboardIconsController.prototype.hideAllIcons = function () {\n        this.hideIcon(DashboardIcons.Engine);\n        this.hideIcon(DashboardIcons.FrontAssist);\n        this.hideIcon(DashboardIcons.Headlights);\n        this.hideIcon(DashboardIcons.LaneAssist);\n        this.hideIcon(DashboardIcons.ParkingBrake);\n        this.hideIcon(DashboardIcons.ParkingSensors);\n        this.hideIcon(DashboardIcons.SeatBelt);\n        this.hideIcon(DashboardIcons.Tempomat);\n        this.hideIcon(DashboardIcons.TurnSignals);\n        this.hideIcon(DashboardIcons.WaterTemperature);\n    };\n    return DashboardIconsController;\n}());\nvar Parking = (function () {\n    function Parking() {\n        var _this = this;\n        this.colorOff = \"lightGray\";\n        this.color1 = \"yellow\";\n        this.color2 = \"orange\";\n        this.color3 = \"orangered\";\n        this.color4 = \"red\";\n        this.colorLeftLine = \"red\";\n        this.colorRightLine = \"green\";\n        this.isOff = true;\n        this.circle1 = null;\n        this.circle2 = null;\n        this.circle3 = null;\n        this.circle4 = null;\n        this.left = null;\n        this.right = null;\n        this.lineLeft = null;\n        this.lineRight = null;\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                _this.circle1.stroke = _this.colorOff;\n                _this.circle2.stroke = _this.colorOff;\n                _this.circle3.stroke = _this.colorOff;\n                _this.circle4.stroke = _this.colorOff;\n                _this.left.stroke = _this.colorOff;\n                _this.right.stroke = _this.colorOff;\n                _this.lineLeft.fill = _this.colorOff;\n                _this.lineRight.fill = _this.colorOff;\n                var dist = msg[\"d\"];\n                if (!_this.isOff) {\n                    _this.miniDisplay.setValue(dist);\n                }\n                if (dist < 50 && dist >= 30) {\n                    _this.circle1.stroke = _this.color1;\n                }\n                if (dist < 30 && dist >= 20) {\n                    _this.circle2.stroke = _this.color2;\n                }\n                if (dist < 20 && dist >= 10) {\n                    _this.circle3.stroke = _this.color3;\n                }\n                if (dist < 10 || msg[\"c\"]) {\n                    _this.circle4.stroke = _this.color4;\n                }\n                if (msg[\"l\"]) {\n                    _this.left.stroke = _this.color4;\n                }\n                if (msg[\"r\"]) {\n                    _this.right.stroke = _this.color4;\n                }\n                if (msg[\"ll\"]) {\n                    _this.lineLeft.fill = _this.colorLeftLine;\n                }\n                if (msg[\"rl\"]) {\n                    _this.lineRight.fill = _this.colorRightLine;\n                }\n                if (msg[\"fa\"]) {\n                    _this.iconsController.showIcon(DashboardIcons.FrontAssist);\n                }\n                else {\n                    _this.iconsController.hideIcon(DashboardIcons.FrontAssist);\n                }\n                _this.canvas.renderAll();\n            }\n        };\n        this.turnOff = function () {\n            _this.isOff = true;\n            _this.update({ \"d\": 10000 });\n            _this.drawMiniDisplay();\n        };\n        this.turnOn = function () {\n            _this.isOff = false;\n            _this.drawMiniDisplay();\n        };\n        this.init = function (canvas) {\n            var startAngle = -2.618;\n            var endAngle = -0.5235;\n            startAngle = -2.35619;\n            endAngle = -0.785398;\n            _this.canvas = canvas;\n            _this.canvas.allowTouchScrolling = false;\n            _this.canvas.setZoom(1);\n            _this.circle1 = new fabric.Circle({\n                radius: 100,\n                left: -10,\n                top: 20,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle2 = new fabric.Circle({\n                radius: 80,\n                left: 10,\n                top: 40,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle3 = new fabric.Circle({\n                radius: 60,\n                left: 30,\n                top: 60,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle4 = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.left = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle - 0.8,\n                endAngle: endAngle - 1.65,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.right = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle + 1.65,\n                endAngle: endAngle + 0.8,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            var body = new fabric.Rect({\n                top: 115,\n                left: 73,\n                width: 50,\n                height: 100,\n                fill: \"gray\",\n                selectable: false\n            });\n            var wleft = new fabric.Rect({\n                top: 180,\n                left: 45,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            var wright = new fabric.Rect({\n                top: 180,\n                left: 126,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            _this.lineLeft = new fabric.Rect({\n                top: 130,\n                left: 80,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            _this.lineRight = new fabric.Rect({\n                top: 130,\n                left: 106,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            var parkingControl = new fabric.Group([\n                _this.circle1, _this.circle2, _this.circle3, _this.circle4, _this.left, _this.right,\n                body, wleft, wright, _this.lineLeft, _this.lineRight\n            ], {\n                left: 1078,\n                top: 140,\n                width: 150,\n                scaleX: 1,\n                scaleY: 1,\n                lockScalingX: true,\n                lockScalingY: true,\n                lockScalingFlip: true,\n                hasBorders: false,\n                hasControls: false\n            });\n            _this.canvas.add(parkingControl);\n            _this.drawMiniDisplay();\n        };\n        this.drawMiniDisplay = function () {\n            if (_this.miniDisplayImage != null) {\n                _this.canvas.remove(_this.miniDisplayImage);\n            }\n            if (_this.isOff) {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    valuesNumeric: false,\n                    value: \"off \",\n                    lcdDecimals: 0\n                });\n            }\n            else {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    unitString: \"cm\",\n                    lcdDecimals: 0,\n                    unitStringVisible: true\n                });\n            }\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.miniDisplayImage = new fabric.Image(document.getElementById(\"gMini\"), {\n                left: 1073 * factor,\n                top: 360 * factor,\n                width: 160 * factor,\n                height: 60 * factor\n            });\n            _this.canvas.add(_this.miniDisplayImage);\n        };\n    }\n    return Parking;\n}());\n;\nvar RequestsHelper = (function () {\n    function RequestsHelper() {\n    }\n    RequestsHelper.prototype.put = function (command, callbackSuccess, callbackError) {\n        if (callbackSuccess === void 0) { callbackSuccess = null; }\n        if (callbackError === void 0) { callbackError = null; }\n        $.ajax({\n            url: Settings.Current.getBaseAPIUrl() + command,\n            type: \"PUT\",\n            success: function (result) {\n                console.log(command);\n                if (callbackSuccess != null) {\n                    callbackSuccess(result);\n                }\n            },\n            error: function (result) {\n                console.log(result + command);\n                if (callbackError != null) {\n                    callbackError(result);\n                }\n            }\n        });\n    };\n    RequestsHelper.Current = new RequestsHelper();\n    return RequestsHelper;\n}());\nvar RobotControls = (function () {\n    function RobotControls() {\n        var _this = this;\n        this.joystickLeft = null;\n        this.accButton = null;\n        this.brakeButton = null;\n        this.currentSpeed = 40;\n        this.showDirectionJoystick = function () {\n            if (_this.joystickLeft != null)\n                return;\n            var currentDirectionAngle = 0;\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n            _this.joystickLeft = nipplejs.create({\n                maxNumberOfNipples: 1,\n                zone: document.getElementById(\"jLeft\"),\n                mode: \"dynamic\",\n                size: 120,\n                position: { left: \"50%\", top: \"50%\" },\n                color: \"green\"\n            }).on(\"start end\", function (evt, data) {\n                if (evt.type === \"end\") {\n                    RequestsHelper.Current.put(\"motor/stop\");\n                    Dashboard.getInstance().stop();\n                }\n            }).on(\"move\", function (evt, data) {\n                var dist = data.distance;\n                if (dist > 10) {\n                    var angle = Math.floor(data.angle.degree / 10) * 10;\n                    if (angle !== currentDirectionAngle) {\n                        RequestsHelper.Current.put(\"motor/move/\" + angle);\n                        currentDirectionAngle = angle;\n                        Dashboard.getInstance().move();\n                        if ((angle > 100 && angle < 260) || angle < 80 || angle > 280) {\n                            Dashboard.getInstance().showIcon(DashboardIcons.TurnSignals);\n                        }\n                        else {\n                            Dashboard.getInstance().hideIcon(DashboardIcons.TurnSignals);\n                        }\n                    }\n                }\n            });\n        };\n    }\n    RobotControls.prototype.init = function () {\n        var _this = this;\n        this.accButton = $(\"#accButton\");\n        this.accButton.click(function () {\n            _this.modifySpeed(+10);\n        });\n        this.brakeButton = $(\"#brakeButton\");\n        this.brakeButton.click(function () {\n            _this.modifySpeed(-10);\n        });\n    };\n    RobotControls.prototype.show = function () {\n        this.showDirectionJoystick();\n        this.accButton.show();\n        this.brakeButton.show();\n    };\n    RobotControls.prototype.hide = function () {\n        if (this.joystickLeft != null) {\n            this.joystickLeft.destroy();\n            this.joystickLeft = null;\n        }\n        if (this.accButton != null) {\n            this.accButton.hide();\n        }\n        if (this.brakeButton != null) {\n            this.brakeButton.hide();\n        }\n    };\n    RobotControls.prototype.modifySpeed = function (speed) {\n        var _this = this;\n        RequestsHelper.Current.put(\"motor/speed/\" + (this.currentSpeed + speed), function (data) {\n            _this.currentSpeed = data[\"speed\"];\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n        });\n    };\n    return RobotControls;\n}());\nvar Settings = (function () {\n    function Settings() {\n        var _this = this;\n        this.robotIpCookieName = \"RobotIP\";\n        this.robotIP = null;\n        this.show = function () {\n            BootstrapDialog.show({\n                title: \"Settings\",\n                message: $(\"<div></div>\").load(\"settings.html\"),\n                closable: true,\n                closeByBackdrop: true,\n                closeByKeyboard: true,\n                data: {},\n                onshow: function (dialogRef) {\n                },\n                onshown: function (dialogRef) {\n                    $(\"#robotIP\").val(_this.getRobotIp());\n                    $(\"#shutdownButton\").click(_this.executeShutdown);\n                    $(\"#rebootButton\").click(_this.executeReboot);\n                    $(\"#stopButton\").click(_this.executeStop);\n                },\n                buttons: [\n                    {\n                        label: \"Close\",\n                        action: function (dialogItself) {\n                            dialogItself.close();\n                        }\n                    }\n                ],\n                onhide: function (dialogRef) {\n                    _this.robotIP = $(\"#robotIP\").val();\n                    _this.storeRobotIp();\n                }\n            });\n        };\n        this.getBaseServerUrl = function () {\n            return \"http://\" + _this.getRobotIp();\n        };\n        this.getBaseAPIUrl = function () {\n            return \"http://\" + _this.getRobotIp() + \":80/ropi/api/v1.0/\";\n        };\n        this.getCameraUrl = function () {\n            return _this.getBaseServerUrl() + \":8080/stream/video.mjpeg\";\n        };\n    }\n    Settings.prototype.getRobotIp = function () {\n        if (!this.checkRobotIp(this.robotIP)) {\n            this.robotIP = Cookies.get(this.robotIpCookieName);\n            if (!this.checkRobotIp(this.robotIP)) {\n                this.robotIP = window.location.hostname;\n                if (!this.checkRobotIp(this.robotIP)) {\n                    this.robotIP = \"raspberrypi\";\n                }\n            }\n        }\n        return this.robotIP;\n    };\n    Settings.prototype.storeRobotIp = function () {\n        Cookies.set(this.robotIpCookieName, this.robotIP);\n    };\n    Settings.prototype.checkRobotIp = function (ip) {\n        return ip != null && ip !== \"\" && ip !== \"undefined\";\n    };\n    Settings.prototype.executeShutdown = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to shutdown the Robot.\\r\\n You won't be able to reach it anymore (power on required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, shutdown!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/shutdown\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeReboot = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to reboot the Robot.\\r\\n Please wait few minutes then reconnect to the Robot.\",\n            type: BootstrapDialog.TYPE_WARNING,\n            btnOKLabel: \"Yes, reboot!\",\n            btnOKClass: \"btn-warning\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/reboot\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeStop = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to stop the server running on the Robot.\\r\\n You won't be able to reach it anymore (hard reset required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, stop it!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"quit\");\n                }\n            }\n        });\n    };\n    Settings.Current = new Settings();\n    return Settings;\n}());\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.application = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n$(document).ready(function () {\n    new Application().run();\n});\nvar Application = (function () {\n    function Application() {\n        var _this = this;\n        this.socketio = null;\n        this.robotIpEntry = null;\n        this.cameraButton = null;\n        this.connectButton = null;\n        this.cameraControlsButton = null;\n        this.cameraControlsOff = null;\n        this.cameraControlsJoystick = null;\n        this.cameraControlsSteppedJoystick = null;\n        this.robotControls = new RobotControls();\n        this.cameraControls = new CameraControls();\n        this.run = function () {\n            _this.robotControls.init();\n            _this.cameraControls.init();\n            _this.cameraButton = $(\"#cameraButton\");\n            _this.cameraButton.bootstrapToggle();\n            _this.cameraButton.change(function () {\n                _this.processToggleCamera();\n            });\n            _this.connectButton = $(\"#connectButton\");\n            _this.connectButton.bootstrapToggle();\n            _this.connectButton.change(function () {\n                _this.processRobotToggle();\n            });\n            _this.cameraControlsButton = $(\"#controlsButtonOptions\");\n            _this.cameraControlsJoystick = $(\"#controlsJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.FollowMeJoystick);\n            });\n            _this.cameraControlsSteppedJoystick = $(\"#controlsSteppedJoystick\").click(function () {\n                _this.cameraControls.selectMode(CameraControl.SteppedJoystick);\n            });\n            _this.disableControlsButton();\n            var settingsButton = $(\"#settingsButton\");\n            settingsButton.click(function () {\n                Settings.Current.show();\n            });\n            Dashboard.getInstance().show();\n        };\n        this.getToggleStatus = function (toggle) { return (toggle != null && toggle.prop(\"checked\")); };\n        this.getIsConnected = function () { return _this.getToggleStatus(_this.connectButton); };\n        this.getIsCameraActive = function () { return _this.getToggleStatus(_this.cameraButton); };\n        this.getIsControlsActive = function () { return true; };\n        this.disableControlsButton = function () {\n            _this.cameraControls.hide();\n            _this.cameraControlsButton.prop(\"disabled\", true);\n        };\n        this.enableControlsButton = function () {\n            _this.cameraControlsButton.prop(\"disabled\", false);\n            _this.cameraControls.show();\n        };\n        this.connect = function () {\n            _this.socketio = io.connect(Settings.Current.getBaseServerUrl() + \":80/\", { 'forceNew': true });\n            _this.socketio.on(\"connected\", function (msg) {\n                $(\"#badge\").text(msg.title + ' ' + msg.robotType);\n                Dashboard.getInstance().hideIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"disconnected\", function (msg) {\n                $(\"#badge\").text('offline');\n                _this.connectButton.bootstrapToggle(\"off\");\n                _this.cameraButton.bootstrapToggle(\"off\");\n            });\n            _this.socketio.on(\"parking\", function (msg) {\n                Dashboard.getInstance().parkingControl.update(msg);\n            });\n            _this.socketio.on(\"sysinfo\", function (msg) {\n                Dashboard.getInstance().update(msg);\n            });\n            _this.socketio.on(\"error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.on(\"reconnect_error\", function (msg) {\n                Dashboard.getInstance().showIcon(DashboardIcons.Engine);\n            });\n            _this.socketio.emit(\"connect\");\n        };\n        this.disconnect = function () {\n            if (_this.socketio !== null) {\n                _this.socketio.disconnect();\n            }\n        };\n        this.processToggleControls = function () {\n            if (!_this.getIsCameraActive())\n                return;\n        };\n        this.processToggleCamera = function () {\n            if (_this.getIsCameraActive()) {\n                Dashboard.getInstance().startCamera();\n                _this.enableControlsButton();\n            }\n            else {\n                Dashboard.getInstance().stopCamera();\n                _this.cameraControls.hide();\n                _this.disableControlsButton();\n            }\n        };\n        this.processRobotToggle = function () {\n            if (_this.getIsConnected()) {\n                Dashboard.getInstance().startEngine(function () {\n                    _this.connect();\n                    _this.robotControls.show();\n                    if (!_this.getIsCameraActive()) {\n                        _this.cameraButton.bootstrapToggle(\"toggle\");\n                    }\n                    _this.enableControlsButton();\n                });\n            }\n            else {\n                Dashboard.getInstance().stopEngine(function () {\n                    $(\"#badge\").text('offline');\n                    _this.robotControls.hide();\n                    _this.disconnect();\n                    if (!_this.getIsCameraActive()) {\n                        _this.disableControlsButton();\n                    }\n                });\n            }\n        };\n    }\n    return Application;\n}());\nvar CameraControl;\n(function (CameraControl) {\n    CameraControl[CameraControl[\"SteppedJoystick\"] = 0] = \"SteppedJoystick\";\n    CameraControl[CameraControl[\"FollowMeJoystick\"] = 1] = \"FollowMeJoystick\";\n})(CameraControl || (CameraControl = {}));\nvar CameraControls = (function () {\n    function CameraControls() {\n        var _this = this;\n        this.joystickRight = null;\n        this.currentTilt = 95;\n        this.currentPan = 90;\n        this.step = 10;\n        this.isBusy = false;\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        this.sendCameraCommand = function (command) {\n            if (_this.isBusy && command !== \"center\") {\n                console.log(\"Skipped request...\");\n                return;\n            }\n            _this.isBusy = true;\n            RequestsHelper.Current.put(\"servos/\" + command, _this.processResult, function () { return _this.isBusy = false; });\n        };\n        this.processResult = function (data) {\n            var pan = data[\"pan\"];\n            var tilt = data[\"tilt\"];\n            if (pan != null && pan !== -1) {\n                _this.currentPan = pan;\n            }\n            if (tilt != null && tilt !== -1) {\n                _this.currentTilt = data[\"tilt\"];\n            }\n            _this.isBusy = false;\n        };\n        this.adjustTilt = function (offset) { return (_this.currentTilt + offset); };\n        this.adjustPan = function (offset) { return (_this.currentPan + offset); };\n    }\n    CameraControls.prototype.init = function () {\n    };\n    CameraControls.prototype.selectMode = function (cameraControl) {\n        this.currentCameraControls = cameraControl;\n    };\n    CameraControls.prototype.show = function () {\n        var _this = this;\n        var currentDirection = null;\n        var currentDistance;\n        var currentPanPercent = 0;\n        var currentTiltPercent = 0;\n        var joystickSize = 120;\n        var distanceMax = Math.floor(joystickSize / 2);\n        var centerX = 0;\n        var centerY = 0;\n        var currentInterval;\n        var steppedStart = false;\n        this.hide();\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n        if (this.joystickRight != null)\n            return;\n        this.joystickRight = nipplejs.create({\n            maxNumberOfNipples: 1,\n            zone: document.getElementById(\"jRight\"),\n            size: joystickSize,\n            mode: \"dynamic\",\n            position: { left: \"50%\", top: \"50%\" },\n            color: \"blue\"\n        }).on(\"start end\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (evt.type === \"start\") {\n                    centerX = data.position.x;\n                    centerY = data.position.y;\n                    console.log(\"centerX:\" + centerX + \"  centerY:\" + centerY);\n                }\n                else {\n                    centerX = 0;\n                    centerY = 0;\n                    _this.sendCameraCommand(\"center\");\n                }\n                currentDirection = null;\n                currentDistance = 0;\n            }\n            else if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                clearInterval(currentInterval);\n                if (evt.type === \"start\") {\n                    steppedStart = true;\n                }\n                else {\n                    _this.sendCameraCommand(\"move/stop\");\n                    if (steppedStart) {\n                        steppedStart = false;\n                        _this.sendCameraCommand(\"center\");\n                    }\n                }\n            }\n        }).on(\"move\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.FollowMeJoystick) {\n                if (data == null || data.direction === null || data.position === null)\n                    return;\n                var panPercent = -Math.floor(((data.position.x - centerX) / distanceMax) * 100);\n                var tiltPercent = Math.floor(((data.position.y - centerY) / distanceMax) * 100);\n                if (panPercent > 100 || panPercent < -100 || tiltPercent > 100 || tiltPercent < -100) {\n                    return;\n                }\n                if (panPercent % 2 === 0 || tiltPercent % 2 === 0) {\n                    if (currentPanPercent !== panPercent || currentTiltPercent !== tiltPercent) {\n                        currentPanPercent = panPercent;\n                        currentTiltPercent = tiltPercent;\n                        _this.sendCameraCommand(\"percent/\" + panPercent + \"/\" + tiltPercent);\n                    }\n                }\n            }\n        }).on(\"dir\", function (evt, data) {\n            if (_this.currentCameraControls === CameraControl.SteppedJoystick) {\n                steppedStart = false;\n                var direction = data.direction.angle;\n                console.log(direction);\n                if (currentDirection === direction) {\n                    return;\n                }\n                currentDirection = direction;\n                _this.sendCameraCommand(\"move/\" + currentDirection);\n            }\n        });\n    };\n    CameraControls.prototype.hide = function () {\n        if (this.joystickRight != null) {\n            this.joystickRight.destroy();\n            this.joystickRight = null;\n        }\n        this.currentCameraControls = CameraControl.SteppedJoystick;\n    };\n    return CameraControls;\n}());\nvar Dashboard = (function () {\n    function Dashboard() {\n        var _this = this;\n        this.parkingControl = new Parking();\n        this.canvas = new fabric.StaticCanvas(\"dashboard\");\n        this.zoomFactor = 1;\n        this.originalWidth = 1408;\n        this.originalHeight = 513;\n        this.isCameraVisible = false;\n        this.cruiseControlSpeed = 0;\n        this.isMoving = false;\n        this.show = function () {\n            _this.canvas.setBackgroundColor(\"black\", function () { });\n            _this.canvas.setHeight(_this.originalHeight);\n            _this.canvas.setWidth(_this.originalWidth);\n            _this.clockController = new DashboardClockController(_this.canvas);\n            _this.iconsController = new DashboardIconsController(_this.canvas);\n            _this.parkingControl.iconsController = _this.iconsController;\n            _this.drawMiddleDisplay();\n            _this.drawCameraAndGauges();\n            setInterval(function () {\n                _this.clockController.updateTime();\n                if (_this.cameraInterval == null) {\n                    _this.canvas.renderAll();\n                }\n            }, 1000);\n            window.onresize = _this.resizeCanvas;\n            _this.tempInterval = setInterval(function () {\n                clearInterval(_this.tempInterval);\n                _this.resizeCanvas();\n            }, 500);\n        };\n        this.startEngine = function (callback) {\n            _this.iconsController.showAllIcons();\n            _this.leftGauge.setValue(100);\n            _this.rightGauge.setValue(90);\n            _this.miniGaugeLeft.setValue(100);\n            _this.miniGaugeRight.setValue(100);\n            setTimeout(function () {\n                _this.iconsController.hideAllIcons();\n                _this.leftGauge.setValue(0);\n                _this.rightGauge.setValue(0);\n                _this.miniGaugeLeft.setValue(0);\n                _this.miniGaugeRight.setValue(0);\n                _this.parkingControl.turnOn();\n                _this.showIcon(DashboardIcons.ParkingSensors);\n                _this.showIcon(DashboardIcons.Headlights);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.showIcon(DashboardIcons.SeatBelt);\n                if (callback != null) {\n                    callback();\n                }\n            }, 1500);\n        };\n        this.stopEngine = function (callback) {\n            _this.parkingControl.turnOff();\n            _this.miniGaugeLeft.setValue(0);\n            _this.miniGaugeRight.setValue(0);\n            _this.rightGauge.setValueAnimated(0);\n            _this.iconsController.hideAllIcons();\n            if (callback != null) {\n                callback();\n            }\n        };\n        this.setCruiseControlSpeed = function (speed) {\n            if (_this.leftGauge != null) {\n                var needMove = false;\n                if (_this.cruiseControlSpeed !== speed && _this.isMoving) {\n                    needMove = true;\n                }\n                _this.cruiseControlSpeed = speed;\n                _this.leftGauge.setThreshold(_this.cruiseControlSpeed);\n                if (needMove) {\n                    _this.move();\n                }\n            }\n            if (_this.cruiseControlSpeed === 0) {\n                _this.hideIcon(DashboardIcons.Tempomat);\n            }\n            else {\n                _this.showIcon(DashboardIcons.Tempomat);\n            }\n        };\n        this.move = function () {\n            if (_this.leftGauge != null && _this.cruiseControlSpeed != null && !_this.isMoving) {\n                _this.hideIcon(DashboardIcons.ParkingBrake);\n                _this.isMoving = true;\n                _this.leftGauge.setValueAnimated(_this.cruiseControlSpeed);\n            }\n        };\n        this.stop = function () {\n            if (_this.leftGauge != null) {\n                _this.isMoving = false;\n                _this.leftGauge.setValueAnimated(0);\n                _this.showIcon(DashboardIcons.ParkingBrake);\n                _this.hideIcon(DashboardIcons.TurnSignals);\n            }\n        };\n        this.showIcon = function (icon) {\n            _this.iconsController.showIcon(icon);\n        };\n        this.hideIcon = function (icon) {\n            _this.iconsController.hideIcon(icon);\n        };\n        this.startCamera = function () {\n            var img = document.getElementById(\"camera\");\n            img.onload = function () {\n                _this.clockController.hideClock();\n                _this.cameraImage.setElement(img);\n                _this.cameraImage.width = 500;\n                _this.cameraImage.height = 375;\n            };\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = Settings.Current.getCameraUrl();\n            _this.cameraInterval = setInterval(function () {\n                _this.canvas.renderAll();\n            }, 250);\n        };\n        this.stopCamera = function () {\n            if (_this.cameraInterval != null) {\n                clearInterval(_this.cameraInterval);\n                _this.cameraInterval = null;\n            }\n            var img = document.getElementById(\"camera\");\n            img.onerror = function () {\n                _this.clockController.showClock();\n            };\n            img.src = \"http://\";\n        };\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                var memPercent = msg[\"mp\"];\n                var cpuPercent = msg[\"cp\"];\n                var cpuTemp = msg[\"ct\"];\n                _this.rightGauge.setValueAnimated(cpuTemp);\n                _this.miniGaugeLeft.setValue(cpuPercent);\n                _this.miniGaugeRight.setValue(memPercent);\n            }\n        };\n        this.drawCameraAndGauges = function () {\n            fabric.Image.fromURL(\"http://\", function (image) {\n                _this.cameraImage = image;\n                var ar = image.height / image.width;\n                image.left = 455;\n                image.top = 60;\n                _this.canvas.add(image);\n                _this.drawGauges();\n            });\n            _this.clockController.showClock();\n        };\n        this.drawLeftGauge = function () {\n            _this.leftGauge = new steelseries.Radial(\"gLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE3,\n                minValue: 0,\n                maxValue: 100,\n                size: 510,\n                ledVisible: false,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                knobStyle: steelseries.KnobStyle.SILVER,\n                pointerType: steelseries.PointerType.TYPE9,\n                lcdDecimals: 0,\n                threshold: 0,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                section: null,\n                area: null,\n                titleString: \"Speed\",\n                unitString: \"%\",\n                lcdVisible: true,\n                useOdometer: true,\n                odometerParams: { digits: 5 },\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var leftGaugeImage = new fabric.Image(document.getElementById(\"gLeft\"), {\n                left: 0,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(leftGaugeImage);\n            _this.miniGaugeLeft = new steelseries.Linear(\"gMiniLeft\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                thresholdVisible: false,\n                lcdVisible: false,\n                niceScale: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeLeftImage = new fabric.Image(document.getElementById(\"gMiniLeft\"), {\n                left: 405,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeLeftImage);\n            _this.miniGaugeRight = new steelseries.Linear(\"gMiniRight\", {\n                gaugeType: steelseries.GaugeType.TYPE1,\n                backgroundVisible: false,\n                frameVisible: false,\n                minValue: 0,\n                maxValue: 100,\n                ledVisible: false,\n                lcdVisible: false,\n                niceScale: true,\n                thresholdVisible: false,\n                foregroundVisible: false,\n            });\n            var miniGaugeRightImage = new fabric.Image(document.getElementById(\"gMiniRight\"), {\n                left: 660,\n                top: 400,\n                width: 340,\n                height: 80\n            });\n            _this.canvas.add(miniGaugeRightImage);\n        };\n        this.drawRightGauge = function () {\n            _this.rightGauge = new steelseries.RadialBargraph(\"gRight\", {\n                gaugeType: steelseries.GaugeType.TYPE2,\n                minValue: 10,\n                maxValue: 90,\n                size: 510,\n                tickLabelOrientation: steelseries.TickLabelOrientation.HORIZONTAL,\n                foregroundType: steelseries.ForegroundType.TYPE3,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                ledVisible: false,\n                niceScale: false,\n                fractionalScaleDecimals: false,\n                useValueGradient: true,\n                section: null,\n                area: null,\n                lcdVisible: false,\n                backgroundColor: steelseries.BackgroundColor.CARBON\n            });\n            var rightGaugeImage = new fabric.Image(document.getElementById(\"gRight\"), {\n                left: 898,\n                top: 0,\n                width: 510,\n                height: 510\n            });\n            _this.canvas.add(rightGaugeImage);\n        };\n        this.drawGauges = function () {\n            _this.drawLeftGauge();\n            _this.drawRightGauge();\n            _this.parkingControl.init(_this.canvas);\n        };\n        this.drawMiddleDisplay = function () {\n            _this.canvas.add(new fabric.Line([400, 59, 1000, 59], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            _this.canvas.add(new fabric.Line([400, 436, 1000, 436], {\n                stroke: \"gray\",\n                strokeWidth: 2\n            }));\n            var degreesText = new fabric.Text(\"22.5 °C\", {\n                fontSize: 28,\n                textAlign: \"center\",\n                left: 890,\n                top: 25,\n                fontFamily: \"Arial\",\n                fill: \"white\"\n            });\n            _this.canvas.add(degreesText);\n        };\n        this.zoomIt = function (factor) {\n            _this.canvas.setHeight(_this.canvas.getHeight() * factor);\n            _this.canvas.setWidth(_this.canvas.getWidth() * factor);\n            if (_this.canvas.backgroundImage) {\n                var bi = _this.canvas.backgroundImage;\n                bi.width = bi.width * factor;\n                bi.height = bi.height * factor;\n            }\n            var objects = _this.canvas.getObjects();\n            for (var i in objects) {\n                var scaleX = objects[i].scaleX;\n                var scaleY = objects[i].scaleY;\n                var left = objects[i].left;\n                var top_1 = objects[i].top;\n                var tempScaleX = scaleX * factor;\n                var tempScaleY = scaleY * factor;\n                var tempLeft = left * factor;\n                var tempTop = top_1 * factor;\n                objects[i].scaleX = tempScaleX;\n                objects[i].scaleY = tempScaleY;\n                objects[i].left = tempLeft;\n                objects[i].top = tempTop;\n                objects[i].setCoords();\n            }\n            _this.canvas.renderAll();\n            _this.canvas.calcOffset();\n        };\n        this.resizeCanvas = function () {\n            var clientWidth = window.innerWidth;\n            _this.zoomFactor = clientWidth / _this.canvas.getWidth();\n            _this.zoomIt(_this.zoomFactor);\n        };\n        if (Dashboard.instance) {\n            throw new Error(\"Error - use Dashboard.getInstance()\");\n        }\n    }\n    Dashboard.getInstance = function () {\n        Dashboard.instance = Dashboard.instance || new Dashboard();\n        return Dashboard.instance;\n    };\n    return Dashboard;\n}());\nvar DashboardClockController = (function () {\n    function DashboardClockController(canvas) {\n        var _this = this;\n        this.hideClock = function () {\n            _this.canvas.remove(_this.clockGaugeImage);\n        };\n        this.showClock = function () {\n            _this.hideClock();\n            new steelseries.Clock(\"gClock\", {\n                gaugeType: steelseries.GaugeType.TYPE4,\n                size: 170,\n                secondPointerVisible: true,\n                backgroundVisible: true,\n                backgroundColor: steelseries.BackgroundColor.BRUSHED_STAINLESS,\n                frameVisible: false,\n                frameDesign: steelseries.FrameDesign.TILTED_BLACK,\n                minValue: 20,\n                maxValue: 80,\n                value: 45,\n                niceScale: true,\n                pointerType: steelseries.PointerType.TYPE5,\n            });\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.clockGaugeImage = new fabric.Image(document.getElementById(\"gClock\"), {\n                left: 579 * factor,\n                top: 120 * factor,\n                width: 250 * factor,\n                height: 250 * factor\n            });\n            _this.canvas.add(_this.clockGaugeImage);\n            _this.canvas.renderAll();\n        };\n        this.updateTime = function () {\n            var today = new Date();\n            var h = _this.checkTime(today.getHours());\n            var m = _this.checkTime(today.getMinutes());\n            _this.clockText.setText(h + \":\" + m);\n        };\n        this.checkTime = function (i) {\n            if (i < 10) {\n                i = \"0\" + i;\n            }\n            ;\n            return i;\n        };\n        this.canvas = canvas;\n        this.clockText = new fabric.Text(\"21:45\", {\n            fontSize: 28,\n            textAlign: \"center\",\n            left: 420,\n            top: 25,\n            fontFamily: \"Arial\",\n            fill: \"white\"\n        });\n        this.canvas.add(this.clockText);\n        this.updateTime();\n    }\n    return DashboardClockController;\n}());\nvar DashboardIcons;\n(function (DashboardIcons) {\n    DashboardIcons[DashboardIcons[\"SeatBelt\"] = 0] = \"SeatBelt\";\n    DashboardIcons[DashboardIcons[\"Tempomat\"] = 1] = \"Tempomat\";\n    DashboardIcons[DashboardIcons[\"FrontAssist\"] = 2] = \"FrontAssist\";\n    DashboardIcons[DashboardIcons[\"Engine\"] = 3] = \"Engine\";\n    DashboardIcons[DashboardIcons[\"Headlights\"] = 4] = \"Headlights\";\n    DashboardIcons[DashboardIcons[\"LaneAssist\"] = 5] = \"LaneAssist\";\n    DashboardIcons[DashboardIcons[\"ParkingBrake\"] = 6] = \"ParkingBrake\";\n    DashboardIcons[DashboardIcons[\"ParkingSensors\"] = 7] = \"ParkingSensors\";\n    DashboardIcons[DashboardIcons[\"WaterTemperature\"] = 8] = \"WaterTemperature\";\n    DashboardIcons[DashboardIcons[\"TurnSignals\"] = 9] = \"TurnSignals\";\n})(DashboardIcons || (DashboardIcons = {}));\nvar DashboardIconsController = (function () {\n    function DashboardIconsController(canvas) {\n        this.icons = {};\n        this.canvas = canvas;\n    }\n    DashboardIconsController.prototype.showIcon = function (target) {\n        var _this = this;\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            return;\n        }\n        else {\n            this.icons[target] = { id: target, isVisible: true };\n        }\n        var path = null;\n        var left = -1;\n        var top = -1;\n        switch (target) {\n            case DashboardIcons.Engine:\n                path = \"/images/Engine.svg\";\n                left = 675;\n                top = 445;\n                break;\n            case DashboardIcons.FrontAssist:\n                path = \"/images/Frontassist.svg\";\n                left = 1230;\n                top = 300;\n                break;\n            case DashboardIcons.Headlights:\n                path = \"/images/Headlights.svg\";\n                left = 615;\n                top = 10;\n                break;\n            case DashboardIcons.LaneAssist:\n                path = \"/images/Laneassist.svg\";\n                left = 525;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingBrake:\n                path = \"/images/Parkingbrake.svg\";\n                left = 840;\n                top = 445;\n                break;\n            case DashboardIcons.ParkingSensors:\n                path = \"/images/Parkingsensors.svg\";\n                left = 1030;\n                top = 300;\n                break;\n            case DashboardIcons.SeatBelt:\n                path = \"/images/Seatbelt.svg\";\n                left = 900;\n                top = 445;\n                break;\n            case DashboardIcons.Tempomat:\n                path = \"/images/Tempomat.svg\";\n                left = 465;\n                top = 445;\n                break;\n            case DashboardIcons.TurnSignals:\n                path = \"/images/Turnsignal.svg\";\n                left = 675;\n                top = 10;\n                break;\n            case DashboardIcons.WaterTemperature:\n                path = \"/images/Temperature.svg\";\n                left = 960;\n                top = 280;\n                break;\n        }\n        if (path !== null && left !== -1 && top !== -1) {\n            fabric.loadSVGFromURL(path, function (objects) {\n                var factor = Dashboard.getInstance().zoomFactor;\n                var result = new fabric.PathGroup(objects, {\n                    left: left * factor,\n                    top: top * factor\n                });\n                result.scaleX = 0.7 * factor;\n                result.scaleY = 0.7 * factor;\n                _this.canvas.add(result);\n                _this.icons[target] = { id: target, iconPath: result, isVisible: true };\n            });\n        }\n    };\n    DashboardIconsController.prototype.hideIcon = function (target) {\n        var icon = this.icons[target];\n        if (icon != undefined && icon.isVisible) {\n            icon.isVisible = false;\n            this.canvas.remove(icon.iconPath);\n            icon.iconPath = null;\n        }\n    };\n    DashboardIconsController.prototype.showAllIcons = function () {\n        this.showIcon(DashboardIcons.Engine);\n        this.showIcon(DashboardIcons.FrontAssist);\n        this.showIcon(DashboardIcons.Headlights);\n        this.showIcon(DashboardIcons.LaneAssist);\n        this.showIcon(DashboardIcons.ParkingBrake);\n        this.showIcon(DashboardIcons.ParkingSensors);\n        this.showIcon(DashboardIcons.SeatBelt);\n        this.showIcon(DashboardIcons.Tempomat);\n        this.showIcon(DashboardIcons.TurnSignals);\n        this.showIcon(DashboardIcons.WaterTemperature);\n    };\n    DashboardIconsController.prototype.hideAllIcons = function () {\n        this.hideIcon(DashboardIcons.Engine);\n        this.hideIcon(DashboardIcons.FrontAssist);\n        this.hideIcon(DashboardIcons.Headlights);\n        this.hideIcon(DashboardIcons.LaneAssist);\n        this.hideIcon(DashboardIcons.ParkingBrake);\n        this.hideIcon(DashboardIcons.ParkingSensors);\n        this.hideIcon(DashboardIcons.SeatBelt);\n        this.hideIcon(DashboardIcons.Tempomat);\n        this.hideIcon(DashboardIcons.TurnSignals);\n        this.hideIcon(DashboardIcons.WaterTemperature);\n    };\n    return DashboardIconsController;\n}());\nvar Parking = (function () {\n    function Parking() {\n        var _this = this;\n        this.colorOff = \"lightGray\";\n        this.color1 = \"yellow\";\n        this.color2 = \"orange\";\n        this.color3 = \"orangered\";\n        this.color4 = \"red\";\n        this.colorLeftLine = \"red\";\n        this.colorRightLine = \"green\";\n        this.isOff = true;\n        this.circle1 = null;\n        this.circle2 = null;\n        this.circle3 = null;\n        this.circle4 = null;\n        this.left = null;\n        this.right = null;\n        this.lineLeft = null;\n        this.lineRight = null;\n        this.update = function (msg) {\n            if (_this.canvas != null) {\n                _this.circle1.stroke = _this.colorOff;\n                _this.circle2.stroke = _this.colorOff;\n                _this.circle3.stroke = _this.colorOff;\n                _this.circle4.stroke = _this.colorOff;\n                _this.left.stroke = _this.colorOff;\n                _this.right.stroke = _this.colorOff;\n                _this.lineLeft.fill = _this.colorOff;\n                _this.lineRight.fill = _this.colorOff;\n                var dist = msg[\"d\"];\n                if (!_this.isOff) {\n                    _this.miniDisplay.setValue(dist);\n                }\n                if (dist < 50 && dist >= 30) {\n                    _this.circle1.stroke = _this.color1;\n                }\n                if (dist < 30 && dist >= 20) {\n                    _this.circle2.stroke = _this.color2;\n                }\n                if (dist < 20 && dist >= 10) {\n                    _this.circle3.stroke = _this.color3;\n                }\n                if (dist < 10 || msg[\"c\"]) {\n                    _this.circle4.stroke = _this.color4;\n                }\n                if (msg[\"l\"]) {\n                    _this.left.stroke = _this.color4;\n                }\n                if (msg[\"r\"]) {\n                    _this.right.stroke = _this.color4;\n                }\n                if (msg[\"ll\"]) {\n                    _this.lineLeft.fill = _this.colorLeftLine;\n                }\n                if (msg[\"rl\"]) {\n                    _this.lineRight.fill = _this.colorRightLine;\n                }\n                if (msg[\"fa\"]) {\n                    _this.iconsController.showIcon(DashboardIcons.FrontAssist);\n                }\n                else {\n                    _this.iconsController.hideIcon(DashboardIcons.FrontAssist);\n                }\n                _this.canvas.renderAll();\n            }\n        };\n        this.turnOff = function () {\n            _this.isOff = true;\n            _this.update({ \"d\": 10000 });\n            _this.drawMiniDisplay();\n        };\n        this.turnOn = function () {\n            _this.isOff = false;\n            _this.drawMiniDisplay();\n        };\n        this.init = function (canvas) {\n            var startAngle = -2.618;\n            var endAngle = -0.5235;\n            startAngle = -2.35619;\n            endAngle = -0.785398;\n            _this.canvas = canvas;\n            _this.canvas.allowTouchScrolling = false;\n            _this.canvas.setZoom(1);\n            _this.circle1 = new fabric.Circle({\n                radius: 100,\n                left: -10,\n                top: 20,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle2 = new fabric.Circle({\n                radius: 80,\n                left: 10,\n                top: 40,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle3 = new fabric.Circle({\n                radius: 60,\n                left: 30,\n                top: 60,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.circle4 = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.left = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle - 0.8,\n                endAngle: endAngle - 1.65,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            _this.right = new fabric.Circle({\n                radius: 40,\n                left: 50,\n                top: 80,\n                angle: 0,\n                startAngle: startAngle + 1.65,\n                endAngle: endAngle + 0.8,\n                stroke: _this.colorOff,\n                strokeWidth: 17,\n                fill: \"\",\n                selectable: false\n            });\n            var body = new fabric.Rect({\n                top: 115,\n                left: 73,\n                width: 50,\n                height: 100,\n                fill: \"gray\",\n                selectable: false\n            });\n            var wleft = new fabric.Rect({\n                top: 180,\n                left: 45,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            var wright = new fabric.Rect({\n                top: 180,\n                left: 126,\n                width: 25,\n                height: 50,\n                fill: \"dimgray\",\n                selectable: false\n            });\n            _this.lineLeft = new fabric.Rect({\n                top: 130,\n                left: 80,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            _this.lineRight = new fabric.Rect({\n                top: 130,\n                left: 106,\n                width: 10,\n                height: 20,\n                fill: _this.colorOff,\n                selectable: false\n            });\n            var parkingControl = new fabric.Group([\n                _this.circle1, _this.circle2, _this.circle3, _this.circle4, _this.left, _this.right,\n                body, wleft, wright, _this.lineLeft, _this.lineRight\n            ], {\n                left: 1078,\n                top: 140,\n                width: 150,\n                scaleX: 1,\n                scaleY: 1,\n                lockScalingX: true,\n                lockScalingY: true,\n                lockScalingFlip: true,\n                hasBorders: false,\n                hasControls: false\n            });\n            _this.canvas.add(parkingControl);\n            _this.drawMiniDisplay();\n        };\n        this.drawMiniDisplay = function () {\n            if (_this.miniDisplayImage != null) {\n                _this.canvas.remove(_this.miniDisplayImage);\n            }\n            if (_this.isOff) {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    valuesNumeric: false,\n                    value: \"off \",\n                    lcdDecimals: 0\n                });\n            }\n            else {\n                _this.miniDisplay = new steelseries.DisplaySingle(\"gMini\", {\n                    width: 160,\n                    height: 60,\n                    unitString: \"cm\",\n                    lcdDecimals: 0,\n                    unitStringVisible: true\n                });\n            }\n            var factor = Dashboard.getInstance().zoomFactor;\n            _this.miniDisplayImage = new fabric.Image(document.getElementById(\"gMini\"), {\n                left: 1073 * factor,\n                top: 360 * factor,\n                width: 160 * factor,\n                height: 60 * factor\n            });\n            _this.canvas.add(_this.miniDisplayImage);\n        };\n    }\n    return Parking;\n}());\n;\nvar RequestsHelper = (function () {\n    function RequestsHelper() {\n    }\n    RequestsHelper.prototype.put = function (command, callbackSuccess, callbackError) {\n        if (callbackSuccess === void 0) { callbackSuccess = null; }\n        if (callbackError === void 0) { callbackError = null; }\n        $.ajax({\n            url: Settings.Current.getBaseAPIUrl() + command,\n            type: \"PUT\",\n            success: function (result) {\n                console.log(command);\n                if (callbackSuccess != null) {\n                    callbackSuccess(result);\n                }\n            },\n            error: function (result) {\n                console.log(result + command);\n                if (callbackError != null) {\n                    callbackError(result);\n                }\n            }\n        });\n    };\n    RequestsHelper.Current = new RequestsHelper();\n    return RequestsHelper;\n}());\nvar RobotControls = (function () {\n    function RobotControls() {\n        var _this = this;\n        this.joystickLeft = null;\n        this.accButton = null;\n        this.brakeButton = null;\n        this.currentSpeed = 40;\n        this.showDirectionJoystick = function () {\n            if (_this.joystickLeft != null)\n                return;\n            var currentDirectionAngle = 0;\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n            _this.joystickLeft = nipplejs.create({\n                maxNumberOfNipples: 1,\n                zone: document.getElementById(\"jLeft\"),\n                mode: \"dynamic\",\n                size: 120,\n                position: { left: \"50%\", top: \"50%\" },\n                color: \"green\"\n            }).on(\"start end\", function (evt, data) {\n                if (evt.type === \"end\") {\n                    RequestsHelper.Current.put(\"motor/stop\");\n                    Dashboard.getInstance().stop();\n                }\n            }).on(\"move\", function (evt, data) {\n                var dist = data.distance;\n                if (dist > 10) {\n                    var angle = Math.floor(data.angle.degree / 10) * 10;\n                    if (angle !== currentDirectionAngle) {\n                        RequestsHelper.Current.put(\"motor/move/\" + angle);\n                        currentDirectionAngle = angle;\n                        Dashboard.getInstance().move();\n                        if ((angle > 100 && angle < 260) || angle < 80 || angle > 280) {\n                            Dashboard.getInstance().showIcon(DashboardIcons.TurnSignals);\n                        }\n                        else {\n                            Dashboard.getInstance().hideIcon(DashboardIcons.TurnSignals);\n                        }\n                    }\n                }\n            });\n        };\n    }\n    RobotControls.prototype.init = function () {\n        var _this = this;\n        this.accButton = $(\"#accButton\");\n        this.accButton.click(function () {\n            _this.modifySpeed(+10);\n        });\n        this.brakeButton = $(\"#brakeButton\");\n        this.brakeButton.click(function () {\n            _this.modifySpeed(-10);\n        });\n    };\n    RobotControls.prototype.show = function () {\n        this.showDirectionJoystick();\n        this.accButton.show();\n        this.brakeButton.show();\n    };\n    RobotControls.prototype.hide = function () {\n        if (this.joystickLeft != null) {\n            this.joystickLeft.destroy();\n            this.joystickLeft = null;\n        }\n        if (this.accButton != null) {\n            this.accButton.hide();\n        }\n        if (this.brakeButton != null) {\n            this.brakeButton.hide();\n        }\n    };\n    RobotControls.prototype.modifySpeed = function (speed) {\n        var _this = this;\n        RequestsHelper.Current.put(\"motor/speed/\" + (this.currentSpeed + speed), function (data) {\n            _this.currentSpeed = data[\"speed\"];\n            Dashboard.getInstance().setCruiseControlSpeed(_this.currentSpeed);\n        });\n    };\n    return RobotControls;\n}());\nvar Settings = (function () {\n    function Settings() {\n        var _this = this;\n        this.robotIpCookieName = \"RobotIP\";\n        this.robotIP = null;\n        this.show = function () {\n            BootstrapDialog.show({\n                title: \"Settings\",\n                message: $(\"<div></div>\").load(\"settings.html\"),\n                closable: true,\n                closeByBackdrop: true,\n                closeByKeyboard: true,\n                data: {},\n                onshow: function (dialogRef) {\n                },\n                onshown: function (dialogRef) {\n                    $(\"#robotIP\").val(_this.getRobotIp());\n                    $(\"#shutdownButton\").click(_this.executeShutdown);\n                    $(\"#rebootButton\").click(_this.executeReboot);\n                    $(\"#stopButton\").click(_this.executeStop);\n                },\n                buttons: [\n                    {\n                        label: \"Close\",\n                        action: function (dialogItself) {\n                            dialogItself.close();\n                        }\n                    }\n                ],\n                onhide: function (dialogRef) {\n                    _this.robotIP = $(\"#robotIP\").val();\n                    _this.storeRobotIp();\n                }\n            });\n        };\n        this.getBaseServerUrl = function () {\n            return \"http://\" + _this.getRobotIp();\n        };\n        this.getBaseAPIUrl = function () {\n            return \"http://\" + _this.getRobotIp() + \":80/ropi/api/v1.0/\";\n        };\n        this.getCameraUrl = function () {\n            return _this.getBaseServerUrl() + \":8080/stream/video.mjpeg\";\n        };\n    }\n    Settings.prototype.getRobotIp = function () {\n        if (!this.checkRobotIp(this.robotIP)) {\n            this.robotIP = Cookies.get(this.robotIpCookieName);\n            if (!this.checkRobotIp(this.robotIP)) {\n                this.robotIP = window.location.hostname;\n                if (!this.checkRobotIp(this.robotIP)) {\n                    this.robotIP = \"raspberrypi\";\n                }\n            }\n        }\n        return this.robotIP;\n    };\n    Settings.prototype.storeRobotIp = function () {\n        Cookies.set(this.robotIpCookieName, this.robotIP);\n    };\n    Settings.prototype.checkRobotIp = function (ip) {\n        return ip != null && ip !== \"\" && ip !== \"undefined\";\n    };\n    Settings.prototype.executeShutdown = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to shutdown the Robot.\\r\\n You won't be able to reach it anymore (power on required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, shutdown!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/shutdown\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeReboot = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to reboot the Robot.\\r\\n Please wait few minutes then reconnect to the Robot.\",\n            type: BootstrapDialog.TYPE_WARNING,\n            btnOKLabel: \"Yes, reboot!\",\n            btnOKClass: \"btn-warning\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"system/reboot\");\n                }\n            }\n        });\n    };\n    Settings.prototype.executeStop = function () {\n        BootstrapDialog.confirm({\n            title: \"WARNING\",\n            message: \"You are about to stop the server running on the Robot.\\r\\n You won't be able to reach it anymore (hard reset required)\",\n            type: BootstrapDialog.TYPE_DANGER,\n            btnOKLabel: \"Yes, stop it!\",\n            btnOKClass: \"btn-danger\",\n            callback: function (result) {\n                if (result) {\n                    RequestsHelper.Current.put(\"quit\");\n                }\n            }\n        });\n    };\n    Settings.Current = new Settings();\n    return Settings;\n}());\n\n},{}]},{},[1])(1)\n});\n\n"],"sourceRoot":"/source/"}